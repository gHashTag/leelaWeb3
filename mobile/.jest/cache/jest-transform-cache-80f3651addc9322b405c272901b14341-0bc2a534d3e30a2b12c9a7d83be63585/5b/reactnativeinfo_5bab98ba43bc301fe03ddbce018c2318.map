{"version":3,"names":["_environment","require","ReactNativeInfo","_classCallCheck2","default","name","id","_createClass2","key","value","setupOnce","addGlobalEventProcessor","_this","event","hint","__awaiter","reactNativeError","originalException","undefined","reactNativeContext","turbo_module","isTurboModuleEnabled","fabric","isFabricEnabled","react_native_version","getReactNativeVersion","expo","isExpo","isHermesEnabled","js_engine","hermesVersion","getHermesVersion","hermes_version","jsEngine","tags","Object","assign","hermes","componentStack","component_stack","contexts","react_native_context","exports"],"sources":["../../../src/js/integrations/reactnativeinfo.ts"],"sourcesContent":["import type { Context, Event, EventHint, EventProcessor, Integration } from '@sentry/types';\n\nimport {\n  getHermesVersion,\n  getReactNativeVersion,\n  isExpo,\n  isFabricEnabled,\n  isHermesEnabled,\n  isTurboModuleEnabled,\n} from '../utils/environment';\nimport type { ReactNativeError } from './debugsymbolicator';\n\nexport interface ReactNativeContext extends Context {\n  js_engine?: string;\n  turbo_module: boolean;\n  fabric: boolean;\n  expo: boolean;\n  hermes_version?: string;\n  react_native_version: string;\n  component_stack?: string;\n}\n\n/** Loads React Native context at runtime */\nexport class ReactNativeInfo implements Integration {\n  /**\n   * @inheritDoc\n   */\n  public static id: string = 'ReactNativeInfo';\n\n  /**\n   * @inheritDoc\n   */\n  public name: string = ReactNativeInfo.id;\n\n  /**\n   * @inheritDoc\n   */\n  public setupOnce(addGlobalEventProcessor: (callback: EventProcessor) => void): void {\n    addGlobalEventProcessor(async (event: Event, hint?: EventHint) => {\n      const reactNativeError = hint?.originalException ? (hint?.originalException as ReactNativeError) : undefined;\n\n      const reactNativeContext: ReactNativeContext = {\n        turbo_module: isTurboModuleEnabled(),\n        fabric: isFabricEnabled(),\n        react_native_version: getReactNativeVersion(),\n        expo: isExpo(),\n      };\n\n      if (isHermesEnabled()) {\n        reactNativeContext.js_engine = 'hermes';\n        const hermesVersion = getHermesVersion();\n        if (hermesVersion) {\n          reactNativeContext.hermes_version = getHermesVersion();\n        }\n      } else if (reactNativeError?.jsEngine) {\n        reactNativeContext.js_engine = reactNativeError.jsEngine;\n      }\n\n      if (reactNativeContext.js_engine === 'hermes') {\n        event.tags = {\n          hermes: 'true',\n          ...event.tags,\n        };\n      }\n\n      if (reactNativeError?.componentStack) {\n        reactNativeContext.component_stack = reactNativeError.componentStack;\n      }\n\n      event.contexts = {\n        react_native_context: reactNativeContext,\n        ...event.contexts,\n      };\n\n      return event;\n    });\n  }\n}\n"],"mappings":";;;;;;;;AAEA,IAAAA,YAAA,GAAAC,OAAA;AAO8B,IAcjBC,eAAe;EAA5B,SAAAA,gBAAA;IAAA,IAAAC,gBAAA,CAAAC,OAAA,QAAAF,eAAA;IASS,KAAAG,IAAI,GAAWH,eAAe,CAACI,EAAE;EA6C1C;EAAC,IAAAC,aAAA,CAAAH,OAAA,EAAAF,eAAA;IAAAM,GAAA;IAAAC,KAAA,EAxCQ,SAAAC,UAAUC,uBAA2D;MAAA,IAAAC,KAAA;MAC1ED,uBAAuB,CAAC,UAAOE,KAAY,EAAEC,IAAgB;QAAA,OAAI,IAAAC,gBAAA,EAAAH,KAAA;UAC/D,IAAMI,gBAAgB,GAAG,CAAAF,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEG,iBAAiB,IAAIH,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEG,iBAAsC,GAAGC,SAAS;UAE5G,IAAMC,kBAAkB,GAAuB;YAC7CC,YAAY,EAAE,IAAAC,iCAAoB,GAAE;YACpCC,MAAM,EAAE,IAAAC,4BAAe,GAAE;YACzBC,oBAAoB,EAAE,IAAAC,kCAAqB,GAAE;YAC7CC,IAAI,EAAE,IAAAC,mBAAM;WACb;UAED,IAAI,IAAAC,4BAAe,GAAE,EAAE;YACrBT,kBAAkB,CAACU,SAAS,GAAG,QAAQ;YACvC,IAAMC,aAAa,GAAG,IAAAC,6BAAgB,GAAE;YACxC,IAAID,aAAa,EAAE;cACjBX,kBAAkB,CAACa,cAAc,GAAG,IAAAD,6BAAgB,GAAE;;WAEzD,MAAM,IAAIf,gBAAgB,aAAhBA,gBAAgB,uBAAhBA,gBAAgB,CAAEiB,QAAQ,EAAE;YACrCd,kBAAkB,CAACU,SAAS,GAAGb,gBAAgB,CAACiB,QAAQ;;UAG1D,IAAId,kBAAkB,CAACU,SAAS,KAAK,QAAQ,EAAE;YAC7ChB,KAAK,CAACqB,IAAI,GAAAC,MAAA,CAAAC,MAAA;cACRC,MAAM,EAAE;YAAM,GACXxB,KAAK,CAACqB,IAAI,CACd;;UAGH,IAAIlB,gBAAgB,aAAhBA,gBAAgB,uBAAhBA,gBAAgB,CAAEsB,cAAc,EAAE;YACpCnB,kBAAkB,CAACoB,eAAe,GAAGvB,gBAAgB,CAACsB,cAAc;;UAGtEzB,KAAK,CAAC2B,QAAQ,GAAAL,MAAA,CAAAC,MAAA;YACZK,oBAAoB,EAAEtB;UAAkB,GACrCN,KAAK,CAAC2B,QAAQ,CAClB;UAED,OAAO3B,KAAK;QACd,CAAC;MAAA,EAAC;IACJ;EAAC;EAAA,OAAAX,eAAA;AAAA;AAAAwC,OAAA,CAAAxC,eAAA,GAAAA,eAAA;AAjDaA,eAAA,CAAAI,EAAE,GAAW,iBAAiB"}