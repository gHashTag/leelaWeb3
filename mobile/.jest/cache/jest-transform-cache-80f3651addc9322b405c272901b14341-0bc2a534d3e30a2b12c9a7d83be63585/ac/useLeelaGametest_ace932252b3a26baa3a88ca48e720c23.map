{"version":3,"names":["_getJestObj","mock","mockAsyncStorage","_interopRequireDefault","require","_asyncToGenerator2","_require","jest","react_hooks_1","i18next_1","__importDefault","mock_async_storage_1","images_1","useLeelaGame_1","default","setItem","fn","describe","beforeEach","clear","it","initialState","currentPlayer","id","plan","previousPlan","isStart","isFinished","consecutiveSixes","message","t","positionBeforeThreeSixes","avatar","GEM_ICONS","lastRoll","rollHistory","planHistory","JSON","stringify","getItem","mockResolvedValue","_ref2","renderHook","useLeelaGame","result","waitForNextUpdate","act","current","rollDice","expect","toMatchObject","toEqual"],"sources":["/Users/playra/LeelaAiWeb3/src/hooks/useLeelaGame/useLeelaGame.test.tsx"],"sourcesContent":["import { renderHook, act } from '@testing-library/react-hooks'\nimport i18next from 'i18next'\n// @ts-ignore\nimport MockAsyncStorage from 'mock-async-storage'\n\nimport { GEM_ICONS } from './images'\nimport { useLeelaGame } from './useLeelaGame'\n\nconst mockAsyncStorage = new MockAsyncStorage()\njest.mock('@react-native-async-storage/async-storage', () => mockAsyncStorage)\n\nmockAsyncStorage.setItem = jest.fn()\n\ndescribe('useLeelaGame', () => {\n  beforeEach(() => {\n    mockAsyncStorage.clear()\n  })\n\n  it('should initialize state correctly', async () => {\n    const initialState = {\n      currentPlayer: {\n        id: 1,\n        plan: 68,\n        previousPlan: 68,\n        isStart: false,\n        isFinished: false,\n        consecutiveSixes: 0,\n        message: i18next.t('sixToBegin'),\n        positionBeforeThreeSixes: 0,\n        avatar: GEM_ICONS[1],\n      },\n      lastRoll: 1,\n      rollHistory: [],\n      planHistory: [68],\n    }\n\n    // Mock AsyncStorage.getItem\n    mockAsyncStorage.setItem('leelaGameState', JSON.stringify(initialState))\n    mockAsyncStorage.getItem = jest\n      .fn()\n      .mockResolvedValue(JSON.stringify(initialState))\n\n    const { result, waitForNextUpdate } = renderHook(() => useLeelaGame())\n\n    // Call the function that triggers state change\n    act(() => {\n      result.current.rollDice()\n    })\n\n    // Wait for the next update\n    await waitForNextUpdate()\n\n    expect(result.current.currentPlayer).toMatchObject(\n      initialState.currentPlayer,\n    )\n    expect(result.current.rollHistory).toEqual(initialState.rollHistory)\n    expect(result.current.planHistory).toEqual(initialState.planHistory)\n  })\n\n  // Test other scenarios similarly\n})\n"],"mappings":";;AASAA,WAAA,GAAKC,IAAI,CAAC,2CAA2C,EAAE;EAAA,OAAMC,gBAAgB;AAAA,EAAC;AAAA,IAAAC,sBAAA,GAAAC,OAAA;AAAA,IAAAC,kBAAA,GAAAF,sBAAA,CAAAC,OAAA;AAAA,SAAAJ,YAAA;EAAA,IAAAM,QAAA,GAAAF,OAAA;IAAAG,IAAA,GAAAD,QAAA,CAAAC,IAAA;EAAAP,WAAA,YAAAA,YAAA;IAAA,OAAAO,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;;;;;;;;;AAT9E,IAAAC,aAAA,GAAAJ,OAAA;AACA,IAAAK,SAAA,GAAAC,eAAA,CAAAN,OAAA;AAEA,IAAAO,oBAAA,GAAAD,eAAA,CAAAN,OAAA;AAEA,IAAAQ,QAAA,GAAAR,OAAA;AACA,IAAAS,cAAA,GAAAT,OAAA;AAEA,IAAMF,gBAAgB,GAAG,IAAIS,oBAAA,CAAAG,OAAgB,EAAE;AAG/CZ,gBAAgB,CAACa,OAAO,GAAGR,IAAI,CAACS,EAAE,EAAE;AAEpCC,QAAQ,CAAC,cAAc,EAAE,YAAK;EAC5BC,UAAU,CAAC,YAAK;IACdhB,gBAAgB,CAACiB,KAAK,EAAE;EAC1B,CAAC,CAAC;EAEFC,EAAE,CAAC,mCAAmC,MAAAf,kBAAA,CAAAS,OAAA,EAAE,aAAW;IACjD,IAAMO,YAAY,GAAG;MACnBC,aAAa,EAAE;QACbC,EAAE,EAAE,CAAC;QACLC,IAAI,EAAE,EAAE;QACRC,YAAY,EAAE,EAAE;QAChBC,OAAO,EAAE,KAAK;QACdC,UAAU,EAAE,KAAK;QACjBC,gBAAgB,EAAE,CAAC;QACnBC,OAAO,EAAEpB,SAAA,CAAAK,OAAO,CAACgB,CAAC,CAAC,YAAY,CAAC;QAChCC,wBAAwB,EAAE,CAAC;QAC3BC,MAAM,EAAEpB,QAAA,CAAAqB,SAAS,CAAC,CAAC;OACpB;MACDC,QAAQ,EAAE,CAAC;MACXC,WAAW,EAAE,EAAE;MACfC,WAAW,EAAE,CAAC,EAAE;KACjB;IAGDlC,gBAAgB,CAACa,OAAO,CAAC,gBAAgB,EAAEsB,IAAI,CAACC,SAAS,CAACjB,YAAY,CAAC,CAAC;IACxEnB,gBAAgB,CAACqC,OAAO,GAAGhC,IAAI,CAC5BS,EAAE,EAAE,CACJwB,iBAAiB,CAACH,IAAI,CAACC,SAAS,CAACjB,YAAY,CAAC,CAAC;IAElD,IAAAoB,KAAA,GAAsC,IAAAjC,aAAA,CAAAkC,UAAU,EAAC;QAAA,OAAM,IAAA7B,cAAA,CAAA8B,YAAY,GAAE;MAAA,EAAC;MAA9DC,MAAM,GAAAH,KAAA,CAANG,MAAM;MAAEC,iBAAiB,GAAAJ,KAAA,CAAjBI,iBAAiB;IAGjC,IAAArC,aAAA,CAAAsC,GAAG,EAAC,YAAK;MACPF,MAAM,CAACG,OAAO,CAACC,QAAQ,EAAE;IAC3B,CAAC,CAAC;IAGF,MAAMH,iBAAiB,EAAE;IAEzBI,MAAM,CAACL,MAAM,CAACG,OAAO,CAACzB,aAAa,CAAC,CAAC4B,aAAa,CAChD7B,YAAY,CAACC,aAAa,CAC3B;IACD2B,MAAM,CAACL,MAAM,CAACG,OAAO,CAACZ,WAAW,CAAC,CAACgB,OAAO,CAAC9B,YAAY,CAACc,WAAW,CAAC;IACpEc,MAAM,CAACL,MAAM,CAACG,OAAO,CAACX,WAAW,CAAC,CAACe,OAAO,CAAC9B,YAAY,CAACe,WAAW,CAAC;EACtE,CAAC,EAAC;AAGJ,CAAC,CAAC"}