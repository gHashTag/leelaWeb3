e1ca7542b63aa3a614fb568e065970c0
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ReactNativeTracing = void 0;
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _tslib = require("tslib");
var _browser = require("@sentry/browser");
var _core = require("@sentry/core");
var _utils = require("@sentry/utils");
var _measurements = require("../measurements");
var _wrapper = require("../wrapper");
var _nativeframes = require("./nativeframes");
var _ops = require("./ops");
var _stalltracking = require("./stalltracking");
var _transaction = require("./transaction");
var _utils2 = require("./utils");
var defaultReactNativeTracingOptions = Object.assign(Object.assign({}, _browser.defaultRequestInstrumentationOptions), {
  idleTimeout: 1000,
  maxTransactionDuration: 600,
  idleTimeoutMs: 1000,
  finalTimeoutMs: 600000,
  ignoreEmptyBackNavigationTransactions: true,
  beforeNavigate: function beforeNavigate(context) {
    return context;
  },
  enableAppStartTracking: true,
  enableNativeFramesTracking: true,
  enableStallTracking: true,
  enableUserInteractionTracing: false
});
var ReactNativeTracing = function () {
  function ReactNativeTracing() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    (0, _classCallCheck2.default)(this, ReactNativeTracing);
    var _a, _b, _c, _d;
    this.name = ReactNativeTracing.id;
    this.useAppStartWithProfiler = false;
    this.options = Object.assign(Object.assign(Object.assign({}, defaultReactNativeTracingOptions), options), {
      finalTimeoutMs: (_b = (_a = options.finalTimeoutMs) !== null && _a !== void 0 ? _a : typeof options.maxTransactionDuration === 'number' ? options.maxTransactionDuration * 1000 : undefined) !== null && _b !== void 0 ? _b : defaultReactNativeTracingOptions.finalTimeoutMs,
      idleTimeoutMs: (_d = (_c = options.idleTimeoutMs) !== null && _c !== void 0 ? _c : options.idleTimeout) !== null && _d !== void 0 ? _d : defaultReactNativeTracingOptions.idleTimeoutMs
    });
  }
  (0, _createClass2.default)(ReactNativeTracing, [{
    key: "setupOnce",
    value: function setupOnce(addGlobalEventProcessor, getCurrentHub) {
      var _this$options = this.options,
        traceFetch = _this$options.traceFetch,
        traceXHR = _this$options.traceXHR,
        tracingOrigins = _this$options.tracingOrigins,
        shouldCreateSpanForRequest = _this$options.shouldCreateSpanForRequest,
        tracePropagationTargets = _this$options.tracePropagationTargets,
        routingInstrumentation = _this$options.routingInstrumentation,
        enableAppStartTracking = _this$options.enableAppStartTracking,
        enableNativeFramesTracking = _this$options.enableNativeFramesTracking,
        enableStallTracking = _this$options.enableStallTracking;
      this._getCurrentHub = getCurrentHub;
      if (enableAppStartTracking) {
        void this._instrumentAppStart();
      }
      if (enableNativeFramesTracking) {
        _wrapper.NATIVE.enableNativeFramesTracking();
        this.nativeFramesInstrumentation = new _nativeframes.NativeFramesInstrumentation(addGlobalEventProcessor, function () {
          var self = getCurrentHub().getIntegration(ReactNativeTracing);
          if (self) {
            return !!self.nativeFramesInstrumentation;
          }
          return false;
        });
      } else {
        _wrapper.NATIVE.disableNativeFramesTracking();
      }
      if (enableStallTracking) {
        this.stallTrackingInstrumentation = new _stalltracking.StallTrackingInstrumentation();
      }
      if (routingInstrumentation) {
        routingInstrumentation.registerRoutingInstrumentation(this._onRouteWillChange.bind(this), this.options.beforeNavigate, this._onConfirmRoute.bind(this));
      } else {
        _utils.logger.log('[ReactNativeTracing] Not instrumenting route changes as routingInstrumentation has not been set.');
      }
      (0, _browser.instrumentOutgoingRequests)({
        traceFetch: traceFetch,
        traceXHR: traceXHR,
        tracingOrigins: tracingOrigins,
        shouldCreateSpanForRequest: shouldCreateSpanForRequest,
        tracePropagationTargets: tracePropagationTargets
      });
    }
  }, {
    key: "onTransactionStart",
    value: function onTransactionStart(transaction) {
      var _a, _b;
      if ((0, _utils2.isNearToNow)(transaction.startTimestamp)) {
        (_a = this.nativeFramesInstrumentation) === null || _a === void 0 ? void 0 : _a.onTransactionStart(transaction);
        (_b = this.stallTrackingInstrumentation) === null || _b === void 0 ? void 0 : _b.onTransactionStart(transaction);
      }
    }
  }, {
    key: "onTransactionFinish",
    value: function onTransactionFinish(transaction, endTimestamp) {
      var _a, _b;
      (_a = this.nativeFramesInstrumentation) === null || _a === void 0 ? void 0 : _a.onTransactionFinish(transaction);
      (_b = this.stallTrackingInstrumentation) === null || _b === void 0 ? void 0 : _b.onTransactionFinish(transaction, endTimestamp);
    }
  }, {
    key: "onAppStartFinish",
    value: function onAppStartFinish(endTimestamp) {
      this._appStartFinishTimestamp = endTimestamp;
    }
  }, {
    key: "startUserInteractionTransaction",
    value: function startUserInteractionTransaction(userInteractionId) {
      var _this = this;
      var _a, _b;
      var elementId = userInteractionId.elementId,
        op = userInteractionId.op;
      if (!this.options.enableUserInteractionTracing) {
        _utils.logger.log('[ReactNativeTracing] User Interaction Tracing is disabled.');
        return;
      }
      if (!this.options.routingInstrumentation) {
        _utils.logger.error('[ReactNativeTracing] User Interaction Tracing is not working because no routing instrumentation is set.');
        return;
      }
      if (!elementId) {
        _utils.logger.log('[ReactNativeTracing] User Interaction Tracing can not create transaction with undefined elementId.');
        return;
      }
      if (!this._currentRoute) {
        _utils.logger.log('[ReactNativeTracing] User Interaction Tracing can not create transaction without a current route.');
        return;
      }
      var hub = ((_a = this._getCurrentHub) === null || _a === void 0 ? void 0 : _a.call(this)) || (0, _core.getCurrentHub)();
      var activeTransaction = (0, _core.getActiveTransaction)(hub);
      var activeTransactionIsNotInteraction = (activeTransaction === null || activeTransaction === void 0 ? void 0 : activeTransaction.spanId) !== ((_b = this._inflightInteractionTransaction) === null || _b === void 0 ? void 0 : _b.spanId);
      if (activeTransaction && activeTransactionIsNotInteraction) {
        _utils.logger.warn(`[ReactNativeTracing] Did not create ${op} transaction because active transaction ${activeTransaction.name} exists on the scope.`);
        return;
      }
      var _this$options2 = this.options,
        idleTimeoutMs = _this$options2.idleTimeoutMs,
        finalTimeoutMs = _this$options2.finalTimeoutMs;
      if (this._inflightInteractionTransaction) {
        this._inflightInteractionTransaction.cancelIdleTimeout(undefined, {
          restartOnChildSpanChange: false
        });
        this._inflightInteractionTransaction = undefined;
      }
      var name = `${this._currentRoute}.${elementId}`;
      var context = {
        name: name,
        op: op,
        trimEnd: true
      };
      this._inflightInteractionTransaction = (0, _core.startIdleTransaction)(hub, context, idleTimeoutMs, finalTimeoutMs, true);
      this._inflightInteractionTransaction.registerBeforeFinishCallback(function (transaction) {
        _this._inflightInteractionTransaction = undefined;
        _this.onTransactionFinish(transaction);
      });
      this._inflightInteractionTransaction.registerBeforeFinishCallback(_transaction.onlySampleIfChildSpans);
      this.onTransactionStart(this._inflightInteractionTransaction);
      _utils.logger.log(`[ReactNativeTracing] User Interaction Tracing Created ${op} transaction ${name}.`);
      return this._inflightInteractionTransaction;
    }
  }, {
    key: "_instrumentAppStart",
    value: function _instrumentAppStart() {
      return (0, _tslib.__awaiter)(this, void 0, void 0, function* () {
        if (!this.options.enableAppStartTracking || !_wrapper.NATIVE.enableNative) {
          return;
        }
        var appStart = yield _wrapper.NATIVE.fetchNativeAppStart();
        if (!appStart || appStart.didFetchAppStart) {
          return;
        }
        if (!this.useAppStartWithProfiler) {
          this._appStartFinishTimestamp = (0, _utils2.getTimeOriginMilliseconds)() / 1000;
        }
        if (this.options.routingInstrumentation) {
          this._awaitingAppStartData = appStart;
        } else {
          var appStartTimeSeconds = appStart.appStartTime / 1000;
          var idleTransaction = this._createRouteTransaction({
            name: 'App Start',
            op: _ops.UI_LOAD,
            startTimestamp: appStartTimeSeconds
          });
          if (idleTransaction) {
            this._addAppStartData(idleTransaction, appStart);
          }
        }
      });
    }
  }, {
    key: "_addAppStartData",
    value: function _addAppStartData(transaction, appStart) {
      if (!this._appStartFinishTimestamp) {
        _utils.logger.warn('App start was never finished.');
        return;
      }
      var appStartTimeSeconds = appStart.appStartTime / 1000;
      var op = appStart.isColdStart ? _ops.APP_START_COLD : _ops.APP_START_WARM;
      transaction.startChild({
        description: appStart.isColdStart ? 'Cold App Start' : 'Warm App Start',
        op: op,
        startTimestamp: appStartTimeSeconds,
        endTimestamp: this._appStartFinishTimestamp
      });
      var appStartDurationMilliseconds = this._appStartFinishTimestamp * 1000 - appStart.appStartTime;
      if (appStartDurationMilliseconds >= ReactNativeTracing._maxAppStart) {
        return;
      }
      var measurement = appStart.isColdStart ? _measurements.APP_START_COLD : _measurements.APP_START_WARM;
      transaction.setMeasurement(measurement, appStartDurationMilliseconds, 'millisecond');
    }
  }, {
    key: "_onRouteWillChange",
    value: function _onRouteWillChange(context) {
      return this._createRouteTransaction(context);
    }
  }, {
    key: "_onConfirmRoute",
    value: function _onConfirmRoute(context) {
      var _a, _b, _c;
      this._currentRoute = (_b = (_a = context.data) === null || _a === void 0 ? void 0 : _a.route) === null || _b === void 0 ? void 0 : _b.name;
      (_c = this._getCurrentHub) === null || _c === void 0 ? void 0 : _c.call(this).configureScope(function (scope) {
        var _a;
        if (context.data) {
          var contextData = context.data;
          scope.addBreadcrumb({
            category: 'navigation',
            type: 'navigation',
            message: `Navigation to ${context.name}`,
            data: {
              from: (_a = contextData.previousRoute) === null || _a === void 0 ? void 0 : _a.name,
              to: contextData.route.name
            }
          });
        }
        scope.setTag('routing.route.name', context.name);
      });
    }
  }, {
    key: "_createRouteTransaction",
    value: function _createRouteTransaction(context) {
      var _this2 = this;
      if (!this._getCurrentHub) {
        _utils.logger.warn(`[ReactNativeTracing] Did not create ${context.op} transaction because _getCurrentHub is invalid.`);
        return undefined;
      }
      if (this._inflightInteractionTransaction) {
        _utils.logger.log(`[ReactNativeTracing] Canceling ${this._inflightInteractionTransaction.op} transaction because navigation ${context.op}.`);
        this._inflightInteractionTransaction.setStatus('cancelled');
        this._inflightInteractionTransaction.finish();
      }
      var _this$options3 = this.options,
        idleTimeoutMs = _this$options3.idleTimeoutMs,
        finalTimeoutMs = _this$options3.finalTimeoutMs;
      var expandedContext = Object.assign(Object.assign({}, context), {
        trimEnd: true
      });
      var hub = this._getCurrentHub();
      var idleTransaction = (0, _core.startIdleTransaction)(hub, expandedContext, idleTimeoutMs, finalTimeoutMs, true);
      this.onTransactionStart(idleTransaction);
      _utils.logger.log(`[ReactNativeTracing] Starting ${context.op} transaction "${context.name}" on scope`);
      idleTransaction.registerBeforeFinishCallback(function (transaction, endTimestamp) {
        _this2.onTransactionFinish(transaction, endTimestamp);
      });
      idleTransaction.registerBeforeFinishCallback(function (transaction) {
        if (_this2.options.enableAppStartTracking && _this2._awaitingAppStartData) {
          transaction.startTimestamp = _this2._awaitingAppStartData.appStartTime / 1000;
          transaction.op = 'ui.load';
          _this2._addAppStartData(transaction, _this2._awaitingAppStartData);
          _this2._awaitingAppStartData = undefined;
        }
      });
      idleTransaction.registerBeforeFinishCallback(function (transaction, endTimestamp) {
        (0, _utils2.adjustTransactionDuration)(finalTimeoutMs, transaction, endTimestamp);
      });
      if (this.options.ignoreEmptyBackNavigationTransactions) {
        idleTransaction.registerBeforeFinishCallback(function (transaction) {
          var _a, _b;
          if (((_b = (_a = transaction.data) === null || _a === void 0 ? void 0 : _a.route) === null || _b === void 0 ? void 0 : _b.hasBeenSeen) && (!transaction.spanRecorder || transaction.spanRecorder.spans.filter(function (span) {
            return span.spanId !== transaction.spanId;
          }).length === 0)) {
            _utils.logger.log('[ReactNativeTracing] Not sampling transaction as route has been seen before. Pass ignoreEmptyBackNavigationTransactions = false to disable this feature.');
            transaction.sampled = false;
          }
        });
      }
      return idleTransaction;
    }
  }]);
  return ReactNativeTracing;
}();
exports.ReactNativeTracing = ReactNativeTracing;
ReactNativeTracing.id = 'ReactNativeTracing';
ReactNativeTracing._maxAppStart = 60000;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfYnJvd3NlciIsInJlcXVpcmUiLCJfY29yZSIsIl91dGlscyIsIl9tZWFzdXJlbWVudHMiLCJfd3JhcHBlciIsIl9uYXRpdmVmcmFtZXMiLCJfb3BzIiwiX3N0YWxsdHJhY2tpbmciLCJfdHJhbnNhY3Rpb24iLCJfdXRpbHMyIiwiZGVmYXVsdFJlYWN0TmF0aXZlVHJhY2luZ09wdGlvbnMiLCJPYmplY3QiLCJhc3NpZ24iLCJkZWZhdWx0UmVxdWVzdEluc3RydW1lbnRhdGlvbk9wdGlvbnMiLCJpZGxlVGltZW91dCIsIm1heFRyYW5zYWN0aW9uRHVyYXRpb24iLCJpZGxlVGltZW91dE1zIiwiZmluYWxUaW1lb3V0TXMiLCJpZ25vcmVFbXB0eUJhY2tOYXZpZ2F0aW9uVHJhbnNhY3Rpb25zIiwiYmVmb3JlTmF2aWdhdGUiLCJjb250ZXh0IiwiZW5hYmxlQXBwU3RhcnRUcmFja2luZyIsImVuYWJsZU5hdGl2ZUZyYW1lc1RyYWNraW5nIiwiZW5hYmxlU3RhbGxUcmFja2luZyIsImVuYWJsZVVzZXJJbnRlcmFjdGlvblRyYWNpbmciLCJSZWFjdE5hdGl2ZVRyYWNpbmciLCJvcHRpb25zIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiX2NsYXNzQ2FsbENoZWNrMiIsImRlZmF1bHQiLCJuYW1lIiwiaWQiLCJ1c2VBcHBTdGFydFdpdGhQcm9maWxlciIsIl9iIiwiX2EiLCJfZCIsIl9jIiwiX2NyZWF0ZUNsYXNzMiIsImtleSIsInZhbHVlIiwic2V0dXBPbmNlIiwiYWRkR2xvYmFsRXZlbnRQcm9jZXNzb3IiLCJnZXRDdXJyZW50SHViIiwiX3RoaXMkb3B0aW9ucyIsInRyYWNlRmV0Y2giLCJ0cmFjZVhIUiIsInRyYWNpbmdPcmlnaW5zIiwic2hvdWxkQ3JlYXRlU3BhbkZvclJlcXVlc3QiLCJ0cmFjZVByb3BhZ2F0aW9uVGFyZ2V0cyIsInJvdXRpbmdJbnN0cnVtZW50YXRpb24iLCJfZ2V0Q3VycmVudEh1YiIsIl9pbnN0cnVtZW50QXBwU3RhcnQiLCJOQVRJVkUiLCJuYXRpdmVGcmFtZXNJbnN0cnVtZW50YXRpb24iLCJOYXRpdmVGcmFtZXNJbnN0cnVtZW50YXRpb24iLCJzZWxmIiwiZ2V0SW50ZWdyYXRpb24iLCJkaXNhYmxlTmF0aXZlRnJhbWVzVHJhY2tpbmciLCJzdGFsbFRyYWNraW5nSW5zdHJ1bWVudGF0aW9uIiwiU3RhbGxUcmFja2luZ0luc3RydW1lbnRhdGlvbiIsInJlZ2lzdGVyUm91dGluZ0luc3RydW1lbnRhdGlvbiIsIl9vblJvdXRlV2lsbENoYW5nZSIsImJpbmQiLCJfb25Db25maXJtUm91dGUiLCJsb2dnZXIiLCJsb2ciLCJpbnN0cnVtZW50T3V0Z29pbmdSZXF1ZXN0cyIsIm9uVHJhbnNhY3Rpb25TdGFydCIsInRyYW5zYWN0aW9uIiwiaXNOZWFyVG9Ob3ciLCJzdGFydFRpbWVzdGFtcCIsIm9uVHJhbnNhY3Rpb25GaW5pc2giLCJlbmRUaW1lc3RhbXAiLCJvbkFwcFN0YXJ0RmluaXNoIiwiX2FwcFN0YXJ0RmluaXNoVGltZXN0YW1wIiwic3RhcnRVc2VySW50ZXJhY3Rpb25UcmFuc2FjdGlvbiIsInVzZXJJbnRlcmFjdGlvbklkIiwiX3RoaXMiLCJlbGVtZW50SWQiLCJvcCIsImVycm9yIiwiX2N1cnJlbnRSb3V0ZSIsImh1YiIsImNhbGwiLCJhY3RpdmVUcmFuc2FjdGlvbiIsImdldEFjdGl2ZVRyYW5zYWN0aW9uIiwiYWN0aXZlVHJhbnNhY3Rpb25Jc05vdEludGVyYWN0aW9uIiwic3BhbklkIiwiX2luZmxpZ2h0SW50ZXJhY3Rpb25UcmFuc2FjdGlvbiIsIndhcm4iLCJfdGhpcyRvcHRpb25zMiIsImNhbmNlbElkbGVUaW1lb3V0IiwicmVzdGFydE9uQ2hpbGRTcGFuQ2hhbmdlIiwidHJpbUVuZCIsInN0YXJ0SWRsZVRyYW5zYWN0aW9uIiwicmVnaXN0ZXJCZWZvcmVGaW5pc2hDYWxsYmFjayIsIm9ubHlTYW1wbGVJZkNoaWxkU3BhbnMiLCJlbmFibGVOYXRpdmUiLCJhcHBTdGFydCIsImZldGNoTmF0aXZlQXBwU3RhcnQiLCJkaWRGZXRjaEFwcFN0YXJ0IiwiZ2V0VGltZU9yaWdpbk1pbGxpc2Vjb25kcyIsIl9hd2FpdGluZ0FwcFN0YXJ0RGF0YSIsImFwcFN0YXJ0VGltZVNlY29uZHMiLCJhcHBTdGFydFRpbWUiLCJpZGxlVHJhbnNhY3Rpb24iLCJfY3JlYXRlUm91dGVUcmFuc2FjdGlvbiIsIlVJX0xPQUQiLCJfYWRkQXBwU3RhcnREYXRhIiwiaXNDb2xkU3RhcnQiLCJBUFBfU1RBUlRfQ09MRF9PUCIsIkFQUF9TVEFSVF9XQVJNX09QIiwic3RhcnRDaGlsZCIsImRlc2NyaXB0aW9uIiwiYXBwU3RhcnREdXJhdGlvbk1pbGxpc2Vjb25kcyIsIl9tYXhBcHBTdGFydCIsIm1lYXN1cmVtZW50IiwiQVBQX1NUQVJUX0NPTEQiLCJBUFBfU1RBUlRfV0FSTSIsInNldE1lYXN1cmVtZW50IiwiZGF0YSIsInJvdXRlIiwiY29uZmlndXJlU2NvcGUiLCJzY29wZSIsImNvbnRleHREYXRhIiwiYWRkQnJlYWRjcnVtYiIsImNhdGVnb3J5IiwidHlwZSIsIm1lc3NhZ2UiLCJmcm9tIiwicHJldmlvdXNSb3V0ZSIsInRvIiwic2V0VGFnIiwiX3RoaXMyIiwic2V0U3RhdHVzIiwiZmluaXNoIiwiX3RoaXMkb3B0aW9uczMiLCJleHBhbmRlZENvbnRleHQiLCJhZGp1c3RUcmFuc2FjdGlvbkR1cmF0aW9uIiwiaGFzQmVlblNlZW4iLCJzcGFuUmVjb3JkZXIiLCJzcGFucyIsImZpbHRlciIsInNwYW4iLCJzYW1wbGVkIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9qcy90cmFjaW5nL3JlYWN0bmF0aXZldHJhY2luZy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBtYXgtbGluZXMgKi9cbmltcG9ydCB0eXBlIHsgUmVxdWVzdEluc3RydW1lbnRhdGlvbk9wdGlvbnMgfSBmcm9tICdAc2VudHJ5L2Jyb3dzZXInO1xuaW1wb3J0IHsgZGVmYXVsdFJlcXVlc3RJbnN0cnVtZW50YXRpb25PcHRpb25zLCBpbnN0cnVtZW50T3V0Z29pbmdSZXF1ZXN0cyB9IGZyb20gJ0BzZW50cnkvYnJvd3Nlcic7XG5pbXBvcnQgdHlwZSB7IEh1YiwgSWRsZVRyYW5zYWN0aW9uLCBUcmFuc2FjdGlvbiB9IGZyb20gJ0BzZW50cnkvY29yZSc7XG5pbXBvcnQgeyBnZXRBY3RpdmVUcmFuc2FjdGlvbiwgZ2V0Q3VycmVudEh1Yiwgc3RhcnRJZGxlVHJhbnNhY3Rpb24gfSBmcm9tICdAc2VudHJ5L2NvcmUnO1xuaW1wb3J0IHR5cGUgeyBFdmVudFByb2Nlc3NvciwgSW50ZWdyYXRpb24sIFRyYW5zYWN0aW9uIGFzIFRyYW5zYWN0aW9uVHlwZSwgVHJhbnNhY3Rpb25Db250ZXh0IH0gZnJvbSAnQHNlbnRyeS90eXBlcyc7XG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICdAc2VudHJ5L3V0aWxzJztcblxuaW1wb3J0IHsgQVBQX1NUQVJUX0NPTEQsIEFQUF9TVEFSVF9XQVJNIH0gZnJvbSAnLi4vbWVhc3VyZW1lbnRzJztcbmltcG9ydCB0eXBlIHsgTmF0aXZlQXBwU3RhcnRSZXNwb25zZSB9IGZyb20gJy4uL05hdGl2ZVJOU2VudHJ5JztcbmltcG9ydCB0eXBlIHsgUm91dGluZ0luc3RydW1lbnRhdGlvbkluc3RhbmNlIH0gZnJvbSAnLi4vdHJhY2luZy9yb3V0aW5nSW5zdHJ1bWVudGF0aW9uJztcbmltcG9ydCB7IE5BVElWRSB9IGZyb20gJy4uL3dyYXBwZXInO1xuaW1wb3J0IHsgTmF0aXZlRnJhbWVzSW5zdHJ1bWVudGF0aW9uIH0gZnJvbSAnLi9uYXRpdmVmcmFtZXMnO1xuaW1wb3J0IHsgQVBQX1NUQVJUX0NPTEQgYXMgQVBQX1NUQVJUX0NPTERfT1AsIEFQUF9TVEFSVF9XQVJNIGFzIEFQUF9TVEFSVF9XQVJNX09QLCBVSV9MT0FEIH0gZnJvbSAnLi9vcHMnO1xuaW1wb3J0IHsgU3RhbGxUcmFja2luZ0luc3RydW1lbnRhdGlvbiB9IGZyb20gJy4vc3RhbGx0cmFja2luZyc7XG5pbXBvcnQgeyBvbmx5U2FtcGxlSWZDaGlsZFNwYW5zIH0gZnJvbSAnLi90cmFuc2FjdGlvbic7XG5pbXBvcnQgdHlwZSB7IEJlZm9yZU5hdmlnYXRlLCBSb3V0ZUNoYW5nZUNvbnRleHREYXRhIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBhZGp1c3RUcmFuc2FjdGlvbkR1cmF0aW9uLCBnZXRUaW1lT3JpZ2luTWlsbGlzZWNvbmRzLCBpc05lYXJUb05vdyB9IGZyb20gJy4vdXRpbHMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFJlYWN0TmF0aXZlVHJhY2luZ09wdGlvbnMgZXh0ZW5kcyBSZXF1ZXN0SW5zdHJ1bWVudGF0aW9uT3B0aW9ucyB7XG4gIC8qKlxuICAgKiBAZGVwcmVjYXRlZCBSZXBsYWNlZCBieSBpZGxlVGltZW91dE1zXG4gICAqL1xuICBpZGxlVGltZW91dDogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBAZGVwcmVjYXRlZCBSZXBsYWNlZCBieSBtYXhUcmFuc2FjdGlvbkR1cmF0aW9uTXNcbiAgICovXG4gIG1heFRyYW5zYWN0aW9uRHVyYXRpb246IG51bWJlcjtcblxuICAvKipcbiAgICogVGhlIHRpbWUgdG8gd2FpdCBpbiBtcyB1bnRpbCB0aGUgdHJhbnNhY3Rpb24gd2lsbCBiZSBmaW5pc2hlZC4gVGhlIHRyYW5zYWN0aW9uIHdpbGwgdXNlIHRoZSBlbmQgdGltZXN0YW1wIG9mXG4gICAqIHRoZSBsYXN0IGZpbmlzaGVkIHNwYW4gYXMgdGhlIGVuZHRpbWUgZm9yIHRoZSB0cmFuc2FjdGlvbi5cbiAgICogVGltZSBpcyBpbiBtcy5cbiAgICpcbiAgICogRGVmYXVsdDogMTAwMFxuICAgKi9cbiAgaWRsZVRpbWVvdXRNczogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBUaGUgbWF4aW11bSBkdXJhdGlvbiAodHJhbnNhY3Rpb24gZHVyYXRpb24gKyBpZGxlIHRpbWVvdXQpIG9mIGEgdHJhbnNhY3Rpb25cbiAgICogYmVmb3JlIGl0IHdpbGwgYmUgbWFya2VkIGFzIFwiZGVhZGxpbmVfZXhjZWVkZWRcIi5cbiAgICogSWYgeW91IG5ldmVyIHdhbnQgdG8gbWFyayBhIHRyYW5zYWN0aW9uIHNldCBpdCB0byAwLlxuICAgKiBUaW1lIGlzIGluIG1zLlxuICAgKlxuICAgKiBEZWZhdWx0OiA2MDAwMDBcbiAgICovXG4gIGZpbmFsVGltZW91dE1zOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRoZSByb3V0aW5nIGluc3RydW1lbnRhdGlvbiB0byBiZSB1c2VkIHdpdGggdGhlIHRyYWNpbmcgaW50ZWdyYXRpb24uXG4gICAqIFRoZXJlIGlzIG5vIHJvdXRpbmcgaW5zdHJ1bWVudGF0aW9uIGlmIG5vdGhpbmcgaXMgcGFzc2VkLlxuICAgKi9cbiAgcm91dGluZ0luc3RydW1lbnRhdGlvbj86IFJvdXRpbmdJbnN0cnVtZW50YXRpb25JbnN0YW5jZTtcblxuICAvKipcbiAgICogRG9lcyBub3Qgc2FtcGxlIHRyYW5zYWN0aW9ucyB0aGF0IGFyZSBmcm9tIHJvdXRlcyB0aGF0IGhhdmUgYmVlbiBzZWVuIGFueSBtb3JlIGFuZCBkb24ndCBoYXZlIGFueSBzcGFucy5cbiAgICogVGhpcyByZW1vdmVzIGEgbG90IG9mIHRoZSBjbHV0dGVyIGFzIG1vc3QgYmFjayBuYXZpZ2F0aW9uIHRyYW5zYWN0aW9ucyBhcmUgbm93IGlnbm9yZWQuXG4gICAqXG4gICAqIERlZmF1bHQ6IHRydWVcbiAgICovXG4gIGlnbm9yZUVtcHR5QmFja05hdmlnYXRpb25UcmFuc2FjdGlvbnM6IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIGJlZm9yZU5hdmlnYXRlIGlzIGNhbGxlZCBiZWZvcmUgYSBuYXZpZ2F0aW9uIHRyYW5zYWN0aW9uIGlzIGNyZWF0ZWQgYW5kIGFsbG93cyB1c2VycyB0byBtb2RpZnkgdHJhbnNhY3Rpb25cbiAgICogY29udGV4dCBkYXRhLCBvciBkcm9wIHRoZSB0cmFuc2FjdGlvbiBlbnRpcmVseSAoYnkgc2V0dGluZyBgc2FtcGxlZCA9IGZhbHNlYCBpbiB0aGUgY29udGV4dCkuXG4gICAqXG4gICAqIEBwYXJhbSBjb250ZXh0OiBUaGUgY29udGV4dCBkYXRhIHdoaWNoIHdpbGwgYmUgcGFzc2VkIHRvIGBzdGFydFRyYW5zYWN0aW9uYCBieSBkZWZhdWx0XG4gICAqXG4gICAqIEByZXR1cm5zIEEgKHBvdGVudGlhbGx5KSBtb2RpZmllZCBjb250ZXh0IG9iamVjdCwgd2l0aCBgc2FtcGxlZCA9IGZhbHNlYCBpZiB0aGUgdHJhbnNhY3Rpb24gc2hvdWxkIGJlIGRyb3BwZWQuXG4gICAqL1xuICBiZWZvcmVOYXZpZ2F0ZTogQmVmb3JlTmF2aWdhdGU7XG5cbiAgLyoqXG4gICAqIFRyYWNrIHRoZSBhcHAgc3RhcnQgdGltZSBieSBhZGRpbmcgbWVhc3VyZW1lbnRzIHRvIHRoZSBmaXJzdCByb3V0ZSB0cmFuc2FjdGlvbi4gSWYgdGhlcmUgaXMgbm8gcm91dGluZyBpbnN0cnVtZW50YXRpb25cbiAgICogYW4gYXBwIHN0YXJ0IHRyYW5zYWN0aW9uIHdpbGwgYmUgc3RhcnRlZC5cbiAgICpcbiAgICogRGVmYXVsdDogdHJ1ZVxuICAgKi9cbiAgZW5hYmxlQXBwU3RhcnRUcmFja2luZzogYm9vbGVhbjtcblxuICAvKipcbiAgICogVHJhY2sgc2xvdy9mcm96ZW4gZnJhbWVzIGZyb20gdGhlIG5hdGl2ZSBsYXllciBhbmQgYWRkcyB0aGVtIGFzIG1lYXN1cmVtZW50cyB0byBhbGwgdHJhbnNhY3Rpb25zLlxuICAgKi9cbiAgZW5hYmxlTmF0aXZlRnJhbWVzVHJhY2tpbmc6IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFRyYWNrIHdoZW4gYW5kIGhvdyBsb25nIHRoZSBKUyBldmVudCBsb29wIHN0YWxscyBmb3IuIEFkZHMgc3RhbGxzIGFzIG1lYXN1cmVtZW50cyB0byBhbGwgdHJhbnNhY3Rpb25zLlxuICAgKi9cbiAgZW5hYmxlU3RhbGxUcmFja2luZzogYm9vbGVhbjtcblxuICAvKipcbiAgICogVHJhY2UgVXNlciBJbnRlcmFjdGlvbiBldmVudHMgbGlrZSB0b3VjaCBhbmQgZ2VzdHVyZXMuXG4gICAqL1xuICBlbmFibGVVc2VySW50ZXJhY3Rpb25UcmFjaW5nOiBib29sZWFuO1xufVxuXG5jb25zdCBkZWZhdWx0UmVhY3ROYXRpdmVUcmFjaW5nT3B0aW9uczogUmVhY3ROYXRpdmVUcmFjaW5nT3B0aW9ucyA9IHtcbiAgLi4uZGVmYXVsdFJlcXVlc3RJbnN0cnVtZW50YXRpb25PcHRpb25zLFxuICBpZGxlVGltZW91dDogMTAwMCxcbiAgbWF4VHJhbnNhY3Rpb25EdXJhdGlvbjogNjAwLFxuICBpZGxlVGltZW91dE1zOiAxMDAwLFxuICBmaW5hbFRpbWVvdXRNczogNjAwMDAwLFxuICBpZ25vcmVFbXB0eUJhY2tOYXZpZ2F0aW9uVHJhbnNhY3Rpb25zOiB0cnVlLFxuICBiZWZvcmVOYXZpZ2F0ZTogY29udGV4dCA9PiBjb250ZXh0LFxuICBlbmFibGVBcHBTdGFydFRyYWNraW5nOiB0cnVlLFxuICBlbmFibGVOYXRpdmVGcmFtZXNUcmFja2luZzogdHJ1ZSxcbiAgZW5hYmxlU3RhbGxUcmFja2luZzogdHJ1ZSxcbiAgZW5hYmxlVXNlckludGVyYWN0aW9uVHJhY2luZzogZmFsc2UsXG59O1xuXG4vKipcbiAqIFRyYWNpbmcgaW50ZWdyYXRpb24gZm9yIFJlYWN0IE5hdGl2ZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFJlYWN0TmF0aXZlVHJhY2luZyBpbXBsZW1lbnRzIEludGVncmF0aW9uIHtcbiAgLyoqXG4gICAqIEBpbmhlcml0RG9jXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGlkOiBzdHJpbmcgPSAnUmVhY3ROYXRpdmVUcmFjaW5nJztcbiAgLyoqIFdlIGZpbHRlciBvdXQgQXBwIHN0YXJ0cyBtb3JlIHRoYW4gNjBzICovXG4gIHByaXZhdGUgc3RhdGljIF9tYXhBcHBTdGFydDogbnVtYmVyID0gNjAwMDA7XG4gIC8qKlxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgcHVibGljIG5hbWU6IHN0cmluZyA9IFJlYWN0TmF0aXZlVHJhY2luZy5pZDtcblxuICAvKiogUmVhY3ROYXRpdmVUcmFjaW5nIG9wdGlvbnMgKi9cbiAgcHVibGljIG9wdGlvbnM6IFJlYWN0TmF0aXZlVHJhY2luZ09wdGlvbnM7XG5cbiAgcHVibGljIG5hdGl2ZUZyYW1lc0luc3RydW1lbnRhdGlvbj86IE5hdGl2ZUZyYW1lc0luc3RydW1lbnRhdGlvbjtcbiAgcHVibGljIHN0YWxsVHJhY2tpbmdJbnN0cnVtZW50YXRpb24/OiBTdGFsbFRyYWNraW5nSW5zdHJ1bWVudGF0aW9uO1xuICBwdWJsaWMgdXNlQXBwU3RhcnRXaXRoUHJvZmlsZXI6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBwcml2YXRlIF9pbmZsaWdodEludGVyYWN0aW9uVHJhbnNhY3Rpb24/OiBJZGxlVHJhbnNhY3Rpb247XG4gIHByaXZhdGUgX2dldEN1cnJlbnRIdWI/OiAoKSA9PiBIdWI7XG4gIHByaXZhdGUgX2F3YWl0aW5nQXBwU3RhcnREYXRhPzogTmF0aXZlQXBwU3RhcnRSZXNwb25zZTtcbiAgcHJpdmF0ZSBfYXBwU3RhcnRGaW5pc2hUaW1lc3RhbXA/OiBudW1iZXI7XG4gIHByaXZhdGUgX2N1cnJlbnRSb3V0ZT86IHN0cmluZztcblxuICBwdWJsaWMgY29uc3RydWN0b3Iob3B0aW9uczogUGFydGlhbDxSZWFjdE5hdGl2ZVRyYWNpbmdPcHRpb25zPiA9IHt9KSB7XG4gICAgdGhpcy5vcHRpb25zID0ge1xuICAgICAgLi4uZGVmYXVsdFJlYWN0TmF0aXZlVHJhY2luZ09wdGlvbnMsXG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgZmluYWxUaW1lb3V0TXM6XG4gICAgICAgIG9wdGlvbnMuZmluYWxUaW1lb3V0TXMgPz9cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uXG4gICAgICAgICh0eXBlb2Ygb3B0aW9ucy5tYXhUcmFuc2FjdGlvbkR1cmF0aW9uID09PSAnbnVtYmVyJ1xuICAgICAgICAgID8gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uXG4gICAgICAgICAgICBvcHRpb25zLm1heFRyYW5zYWN0aW9uRHVyYXRpb24gKiAxMDAwXG4gICAgICAgICAgOiB1bmRlZmluZWQpID8/XG4gICAgICAgIGRlZmF1bHRSZWFjdE5hdGl2ZVRyYWNpbmdPcHRpb25zLmZpbmFsVGltZW91dE1zLFxuICAgICAgaWRsZVRpbWVvdXRNczpcbiAgICAgICAgb3B0aW9ucy5pZGxlVGltZW91dE1zID8/XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvblxuICAgICAgICBvcHRpb25zLmlkbGVUaW1lb3V0ID8/XG4gICAgICAgIGRlZmF1bHRSZWFjdE5hdGl2ZVRyYWNpbmdPcHRpb25zLmlkbGVUaW1lb3V0TXMsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiAgUmVnaXN0ZXJzIHJvdXRpbmcgYW5kIHJlcXVlc3QgaW5zdHJ1bWVudGF0aW9uLlxuICAgKi9cbiAgcHVibGljIHNldHVwT25jZShcbiAgICAvLyBAdHMtaWdub3JlIFRPRE9cbiAgICBhZGRHbG9iYWxFdmVudFByb2Nlc3NvcjogKGNhbGxiYWNrOiBFdmVudFByb2Nlc3NvcikgPT4gdm9pZCxcbiAgICBnZXRDdXJyZW50SHViOiAoKSA9PiBIdWIsXG4gICk6IHZvaWQge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvdW5ib3VuZC1tZXRob2RcbiAgICBjb25zdCB7XG4gICAgICB0cmFjZUZldGNoLFxuICAgICAgdHJhY2VYSFIsXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVwcmVjYXRpb24vZGVwcmVjYXRpb25cbiAgICAgIHRyYWNpbmdPcmlnaW5zLFxuICAgICAgLy8gQHRzLWlnbm9yZSBUT0RPXG4gICAgICBzaG91bGRDcmVhdGVTcGFuRm9yUmVxdWVzdCxcbiAgICAgIHRyYWNlUHJvcGFnYXRpb25UYXJnZXRzLFxuICAgICAgcm91dGluZ0luc3RydW1lbnRhdGlvbixcbiAgICAgIGVuYWJsZUFwcFN0YXJ0VHJhY2tpbmcsXG4gICAgICBlbmFibGVOYXRpdmVGcmFtZXNUcmFja2luZyxcbiAgICAgIGVuYWJsZVN0YWxsVHJhY2tpbmcsXG4gICAgfSA9IHRoaXMub3B0aW9ucztcblxuICAgIHRoaXMuX2dldEN1cnJlbnRIdWIgPSBnZXRDdXJyZW50SHViO1xuXG4gICAgaWYgKGVuYWJsZUFwcFN0YXJ0VHJhY2tpbmcpIHtcbiAgICAgIHZvaWQgdGhpcy5faW5zdHJ1bWVudEFwcFN0YXJ0KCk7XG4gICAgfVxuXG4gICAgaWYgKGVuYWJsZU5hdGl2ZUZyYW1lc1RyYWNraW5nKSB7XG4gICAgICBOQVRJVkUuZW5hYmxlTmF0aXZlRnJhbWVzVHJhY2tpbmcoKTtcbiAgICAgIHRoaXMubmF0aXZlRnJhbWVzSW5zdHJ1bWVudGF0aW9uID0gbmV3IE5hdGl2ZUZyYW1lc0luc3RydW1lbnRhdGlvbihhZGRHbG9iYWxFdmVudFByb2Nlc3NvciwgKCkgPT4ge1xuICAgICAgICBjb25zdCBzZWxmID0gZ2V0Q3VycmVudEh1YigpLmdldEludGVncmF0aW9uKFJlYWN0TmF0aXZlVHJhY2luZyk7XG5cbiAgICAgICAgaWYgKHNlbGYpIHtcbiAgICAgICAgICByZXR1cm4gISFzZWxmLm5hdGl2ZUZyYW1lc0luc3RydW1lbnRhdGlvbjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBOQVRJVkUuZGlzYWJsZU5hdGl2ZUZyYW1lc1RyYWNraW5nKCk7XG4gICAgfVxuXG4gICAgaWYgKGVuYWJsZVN0YWxsVHJhY2tpbmcpIHtcbiAgICAgIHRoaXMuc3RhbGxUcmFja2luZ0luc3RydW1lbnRhdGlvbiA9IG5ldyBTdGFsbFRyYWNraW5nSW5zdHJ1bWVudGF0aW9uKCk7XG4gICAgfVxuXG4gICAgaWYgKHJvdXRpbmdJbnN0cnVtZW50YXRpb24pIHtcbiAgICAgIHJvdXRpbmdJbnN0cnVtZW50YXRpb24ucmVnaXN0ZXJSb3V0aW5nSW5zdHJ1bWVudGF0aW9uKFxuICAgICAgICB0aGlzLl9vblJvdXRlV2lsbENoYW5nZS5iaW5kKHRoaXMpLFxuICAgICAgICB0aGlzLm9wdGlvbnMuYmVmb3JlTmF2aWdhdGUsXG4gICAgICAgIHRoaXMuX29uQ29uZmlybVJvdXRlLmJpbmQodGhpcyksXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBsb2dnZXIubG9nKCdbUmVhY3ROYXRpdmVUcmFjaW5nXSBOb3QgaW5zdHJ1bWVudGluZyByb3V0ZSBjaGFuZ2VzIGFzIHJvdXRpbmdJbnN0cnVtZW50YXRpb24gaGFzIG5vdCBiZWVuIHNldC4nKTtcbiAgICB9XG5cbiAgICBpbnN0cnVtZW50T3V0Z29pbmdSZXF1ZXN0cyh7XG4gICAgICB0cmFjZUZldGNoLFxuICAgICAgdHJhY2VYSFIsXG4gICAgICB0cmFjaW5nT3JpZ2lucyxcbiAgICAgIHNob3VsZENyZWF0ZVNwYW5Gb3JSZXF1ZXN0LFxuICAgICAgdHJhY2VQcm9wYWdhdGlvblRhcmdldHMsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVG8gYmUgY2FsbGVkIG9uIGEgdHJhbnNhY3Rpb24gc3RhcnQuIENhbiBoYXZlIGFzeW5jIG1ldGhvZHNcbiAgICovXG4gIHB1YmxpYyBvblRyYW5zYWN0aW9uU3RhcnQodHJhbnNhY3Rpb246IFRyYW5zYWN0aW9uKTogdm9pZCB7XG4gICAgaWYgKGlzTmVhclRvTm93KHRyYW5zYWN0aW9uLnN0YXJ0VGltZXN0YW1wKSkge1xuICAgICAgLy8gT25seSBpZiB0aGlzIG1ldGhvZCBpcyBjYWxsZWQgYXQgb3Igd2l0aGluIG1hcmdpbiBvZiBlcnJvciB0byB0aGUgc3RhcnQgdGltZXN0YW1wLlxuICAgICAgdGhpcy5uYXRpdmVGcmFtZXNJbnN0cnVtZW50YXRpb24/Lm9uVHJhbnNhY3Rpb25TdGFydCh0cmFuc2FjdGlvbik7XG4gICAgICB0aGlzLnN0YWxsVHJhY2tpbmdJbnN0cnVtZW50YXRpb24/Lm9uVHJhbnNhY3Rpb25TdGFydCh0cmFuc2FjdGlvbik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRvIGJlIGNhbGxlZCBvbiBhIHRyYW5zYWN0aW9uIGZpbmlzaC4gQ2Fubm90IGhhdmUgYXN5bmMgbWV0aG9kcy5cbiAgICovXG4gIHB1YmxpYyBvblRyYW5zYWN0aW9uRmluaXNoKHRyYW5zYWN0aW9uOiBUcmFuc2FjdGlvbiwgZW5kVGltZXN0YW1wPzogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5uYXRpdmVGcmFtZXNJbnN0cnVtZW50YXRpb24/Lm9uVHJhbnNhY3Rpb25GaW5pc2godHJhbnNhY3Rpb24pO1xuICAgIHRoaXMuc3RhbGxUcmFja2luZ0luc3RydW1lbnRhdGlvbj8ub25UcmFuc2FjdGlvbkZpbmlzaCh0cmFuc2FjdGlvbiwgZW5kVGltZXN0YW1wKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgYnkgdGhlIFJlYWN0TmF0aXZlUHJvZmlsZXIgY29tcG9uZW50IG9uIGZpcnN0IGNvbXBvbmVudCBtb3VudC5cbiAgICovXG4gIHB1YmxpYyBvbkFwcFN0YXJ0RmluaXNoKGVuZFRpbWVzdGFtcDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fYXBwU3RhcnRGaW5pc2hUaW1lc3RhbXAgPSBlbmRUaW1lc3RhbXA7XG4gIH1cblxuICAvKipcbiAgICogU3RhcnRzIGEgbmV3IHRyYW5zYWN0aW9uIGZvciBhIHVzZXIgaW50ZXJhY3Rpb24uXG4gICAqIEBwYXJhbSB1c2VySW50ZXJhY3Rpb25JZCBDb25zaXN0cyBvZiBgb3BgIHJlcHJlc2VudGF0aW9uIFVJIEV2ZW50IGFuZCBgZWxlbWVudElkYCB1bmlxdWUgZWxlbWVudCBpZGVudGlmaWVyIG9uIGN1cnJlbnQgc2NyZWVuLlxuICAgKi9cbiAgcHVibGljIHN0YXJ0VXNlckludGVyYWN0aW9uVHJhbnNhY3Rpb24odXNlckludGVyYWN0aW9uSWQ6IHtcbiAgICBlbGVtZW50SWQ6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICBvcDogc3RyaW5nO1xuICB9KTogVHJhbnNhY3Rpb25UeXBlIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCB7IGVsZW1lbnRJZCwgb3AgfSA9IHVzZXJJbnRlcmFjdGlvbklkO1xuICAgIGlmICghdGhpcy5vcHRpb25zLmVuYWJsZVVzZXJJbnRlcmFjdGlvblRyYWNpbmcpIHtcbiAgICAgIGxvZ2dlci5sb2coJ1tSZWFjdE5hdGl2ZVRyYWNpbmddIFVzZXIgSW50ZXJhY3Rpb24gVHJhY2luZyBpcyBkaXNhYmxlZC4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCF0aGlzLm9wdGlvbnMucm91dGluZ0luc3RydW1lbnRhdGlvbikge1xuICAgICAgbG9nZ2VyLmVycm9yKFxuICAgICAgICAnW1JlYWN0TmF0aXZlVHJhY2luZ10gVXNlciBJbnRlcmFjdGlvbiBUcmFjaW5nIGlzIG5vdCB3b3JraW5nIGJlY2F1c2Ugbm8gcm91dGluZyBpbnN0cnVtZW50YXRpb24gaXMgc2V0LicsXG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIWVsZW1lbnRJZCkge1xuICAgICAgbG9nZ2VyLmxvZygnW1JlYWN0TmF0aXZlVHJhY2luZ10gVXNlciBJbnRlcmFjdGlvbiBUcmFjaW5nIGNhbiBub3QgY3JlYXRlIHRyYW5zYWN0aW9uIHdpdGggdW5kZWZpbmVkIGVsZW1lbnRJZC4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCF0aGlzLl9jdXJyZW50Um91dGUpIHtcbiAgICAgIGxvZ2dlci5sb2coJ1tSZWFjdE5hdGl2ZVRyYWNpbmddIFVzZXIgSW50ZXJhY3Rpb24gVHJhY2luZyBjYW4gbm90IGNyZWF0ZSB0cmFuc2FjdGlvbiB3aXRob3V0IGEgY3VycmVudCByb3V0ZS4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBodWIgPSB0aGlzLl9nZXRDdXJyZW50SHViPy4oKSB8fCBnZXRDdXJyZW50SHViKCk7XG4gICAgY29uc3QgYWN0aXZlVHJhbnNhY3Rpb24gPSBnZXRBY3RpdmVUcmFuc2FjdGlvbihodWIpO1xuICAgIGNvbnN0IGFjdGl2ZVRyYW5zYWN0aW9uSXNOb3RJbnRlcmFjdGlvbiA9XG4gICAgICBhY3RpdmVUcmFuc2FjdGlvbj8uc3BhbklkICE9PSB0aGlzLl9pbmZsaWdodEludGVyYWN0aW9uVHJhbnNhY3Rpb24/LnNwYW5JZDtcbiAgICBpZiAoYWN0aXZlVHJhbnNhY3Rpb24gJiYgYWN0aXZlVHJhbnNhY3Rpb25Jc05vdEludGVyYWN0aW9uKSB7XG4gICAgICBsb2dnZXIud2FybihcbiAgICAgICAgYFtSZWFjdE5hdGl2ZVRyYWNpbmddIERpZCBub3QgY3JlYXRlICR7b3B9IHRyYW5zYWN0aW9uIGJlY2F1c2UgYWN0aXZlIHRyYW5zYWN0aW9uICR7YWN0aXZlVHJhbnNhY3Rpb24ubmFtZX0gZXhpc3RzIG9uIHRoZSBzY29wZS5gLFxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB7IGlkbGVUaW1lb3V0TXMsIGZpbmFsVGltZW91dE1zIH0gPSB0aGlzLm9wdGlvbnM7XG5cbiAgICBpZiAodGhpcy5faW5mbGlnaHRJbnRlcmFjdGlvblRyYW5zYWN0aW9uKSB7XG4gICAgICB0aGlzLl9pbmZsaWdodEludGVyYWN0aW9uVHJhbnNhY3Rpb24uY2FuY2VsSWRsZVRpbWVvdXQodW5kZWZpbmVkLCB7IHJlc3RhcnRPbkNoaWxkU3BhbkNoYW5nZTogZmFsc2UgfSk7XG4gICAgICB0aGlzLl9pbmZsaWdodEludGVyYWN0aW9uVHJhbnNhY3Rpb24gPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgY29uc3QgbmFtZSA9IGAke3RoaXMuX2N1cnJlbnRSb3V0ZX0uJHtlbGVtZW50SWR9YDtcbiAgICBjb25zdCBjb250ZXh0OiBUcmFuc2FjdGlvbkNvbnRleHQgPSB7XG4gICAgICBuYW1lLFxuICAgICAgb3AsXG4gICAgICB0cmltRW5kOiB0cnVlLFxuICAgIH07XG4gICAgdGhpcy5faW5mbGlnaHRJbnRlcmFjdGlvblRyYW5zYWN0aW9uID0gc3RhcnRJZGxlVHJhbnNhY3Rpb24oaHViLCBjb250ZXh0LCBpZGxlVGltZW91dE1zLCBmaW5hbFRpbWVvdXRNcywgdHJ1ZSk7XG4gICAgdGhpcy5faW5mbGlnaHRJbnRlcmFjdGlvblRyYW5zYWN0aW9uLnJlZ2lzdGVyQmVmb3JlRmluaXNoQ2FsbGJhY2soKHRyYW5zYWN0aW9uOiBJZGxlVHJhbnNhY3Rpb24pID0+IHtcbiAgICAgIHRoaXMuX2luZmxpZ2h0SW50ZXJhY3Rpb25UcmFuc2FjdGlvbiA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMub25UcmFuc2FjdGlvbkZpbmlzaCh0cmFuc2FjdGlvbik7XG4gICAgfSk7XG4gICAgdGhpcy5faW5mbGlnaHRJbnRlcmFjdGlvblRyYW5zYWN0aW9uLnJlZ2lzdGVyQmVmb3JlRmluaXNoQ2FsbGJhY2sob25seVNhbXBsZUlmQ2hpbGRTcGFucyk7XG4gICAgdGhpcy5vblRyYW5zYWN0aW9uU3RhcnQodGhpcy5faW5mbGlnaHRJbnRlcmFjdGlvblRyYW5zYWN0aW9uKTtcbiAgICBsb2dnZXIubG9nKGBbUmVhY3ROYXRpdmVUcmFjaW5nXSBVc2VyIEludGVyYWN0aW9uIFRyYWNpbmcgQ3JlYXRlZCAke29wfSB0cmFuc2FjdGlvbiAke25hbWV9LmApO1xuICAgIHJldHVybiB0aGlzLl9pbmZsaWdodEludGVyYWN0aW9uVHJhbnNhY3Rpb247XG4gIH1cblxuICAvKipcbiAgICogSW5zdHJ1bWVudHMgdGhlIGFwcCBzdGFydCBtZWFzdXJlbWVudHMgb24gdGhlIGZpcnN0IHJvdXRlIHRyYW5zYWN0aW9uLlxuICAgKiBTdGFydHMgYSByb3V0ZSB0cmFuc2FjdGlvbiBpZiB0aGVyZSBpc24ndCByb3V0aW5nIGluc3RydW1lbnRhdGlvbi5cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgX2luc3RydW1lbnRBcHBTdGFydCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5lbmFibGVBcHBTdGFydFRyYWNraW5nIHx8ICFOQVRJVkUuZW5hYmxlTmF0aXZlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgYXBwU3RhcnQgPSBhd2FpdCBOQVRJVkUuZmV0Y2hOYXRpdmVBcHBTdGFydCgpO1xuXG4gICAgaWYgKCFhcHBTdGFydCB8fCBhcHBTdGFydC5kaWRGZXRjaEFwcFN0YXJ0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnVzZUFwcFN0YXJ0V2l0aFByb2ZpbGVyKSB7XG4gICAgICB0aGlzLl9hcHBTdGFydEZpbmlzaFRpbWVzdGFtcCA9IGdldFRpbWVPcmlnaW5NaWxsaXNlY29uZHMoKSAvIDEwMDA7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMub3B0aW9ucy5yb3V0aW5nSW5zdHJ1bWVudGF0aW9uKSB7XG4gICAgICB0aGlzLl9hd2FpdGluZ0FwcFN0YXJ0RGF0YSA9IGFwcFN0YXJ0O1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBhcHBTdGFydFRpbWVTZWNvbmRzID0gYXBwU3RhcnQuYXBwU3RhcnRUaW1lIC8gMTAwMDtcblxuICAgICAgY29uc3QgaWRsZVRyYW5zYWN0aW9uID0gdGhpcy5fY3JlYXRlUm91dGVUcmFuc2FjdGlvbih7XG4gICAgICAgIG5hbWU6ICdBcHAgU3RhcnQnLFxuICAgICAgICBvcDogVUlfTE9BRCxcbiAgICAgICAgc3RhcnRUaW1lc3RhbXA6IGFwcFN0YXJ0VGltZVNlY29uZHMsXG4gICAgICB9KTtcblxuICAgICAgaWYgKGlkbGVUcmFuc2FjdGlvbikge1xuICAgICAgICB0aGlzLl9hZGRBcHBTdGFydERhdGEoaWRsZVRyYW5zYWN0aW9uLCBhcHBTdGFydCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYXBwIHN0YXJ0IG1lYXN1cmVtZW50cyBhbmQgc3RhcnRzIGEgY2hpbGQgc3BhbiBvbiBhIHRyYW5zYWN0aW9uLlxuICAgKi9cbiAgcHJpdmF0ZSBfYWRkQXBwU3RhcnREYXRhKHRyYW5zYWN0aW9uOiBJZGxlVHJhbnNhY3Rpb24sIGFwcFN0YXJ0OiBOYXRpdmVBcHBTdGFydFJlc3BvbnNlKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9hcHBTdGFydEZpbmlzaFRpbWVzdGFtcCkge1xuICAgICAgbG9nZ2VyLndhcm4oJ0FwcCBzdGFydCB3YXMgbmV2ZXIgZmluaXNoZWQuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgYXBwU3RhcnRUaW1lU2Vjb25kcyA9IGFwcFN0YXJ0LmFwcFN0YXJ0VGltZSAvIDEwMDA7XG5cbiAgICBjb25zdCBvcCA9IGFwcFN0YXJ0LmlzQ29sZFN0YXJ0ID8gQVBQX1NUQVJUX0NPTERfT1AgOiBBUFBfU1RBUlRfV0FSTV9PUDtcbiAgICB0cmFuc2FjdGlvbi5zdGFydENoaWxkKHtcbiAgICAgIGRlc2NyaXB0aW9uOiBhcHBTdGFydC5pc0NvbGRTdGFydCA/ICdDb2xkIEFwcCBTdGFydCcgOiAnV2FybSBBcHAgU3RhcnQnLFxuICAgICAgb3AsXG4gICAgICBzdGFydFRpbWVzdGFtcDogYXBwU3RhcnRUaW1lU2Vjb25kcyxcbiAgICAgIGVuZFRpbWVzdGFtcDogdGhpcy5fYXBwU3RhcnRGaW5pc2hUaW1lc3RhbXAsXG4gICAgfSk7XG5cbiAgICBjb25zdCBhcHBTdGFydER1cmF0aW9uTWlsbGlzZWNvbmRzID0gdGhpcy5fYXBwU3RhcnRGaW5pc2hUaW1lc3RhbXAgKiAxMDAwIC0gYXBwU3RhcnQuYXBwU3RhcnRUaW1lO1xuXG4gICAgLy8gd2UgZmlsdGVyIG91dCBhcHAgc3RhcnQgbW9yZSB0aGFuIDYwcy5cbiAgICAvLyB0aGlzIGNvdWxkIGJlIGR1ZSB0byBtYW55IGRpZmZlcmVudCByZWFzb25zLlxuICAgIC8vIHdlJ3ZlIHNlZW4gYXBwIHN0YXJ0cyB3aXRoIGhvdXJzLCBkYXlzIGFuZCBldmVuIG1vbnRocy5cbiAgICBpZiAoYXBwU3RhcnREdXJhdGlvbk1pbGxpc2Vjb25kcyA+PSBSZWFjdE5hdGl2ZVRyYWNpbmcuX21heEFwcFN0YXJ0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgbWVhc3VyZW1lbnQgPSBhcHBTdGFydC5pc0NvbGRTdGFydCA/IEFQUF9TVEFSVF9DT0xEIDogQVBQX1NUQVJUX1dBUk07XG4gICAgdHJhbnNhY3Rpb24uc2V0TWVhc3VyZW1lbnQobWVhc3VyZW1lbnQsIGFwcFN0YXJ0RHVyYXRpb25NaWxsaXNlY29uZHMsICdtaWxsaXNlY29uZCcpO1xuICB9XG5cbiAgLyoqIFRvIGJlIGNhbGxlZCB3aGVuIHRoZSByb3V0ZSBjaGFuZ2VzLCBidXQgQkVGT1JFIHRoZSBjb21wb25lbnRzIG9mIHRoZSBuZXcgcm91dGUgbW91bnQuICovXG4gIHByaXZhdGUgX29uUm91dGVXaWxsQ2hhbmdlKGNvbnRleHQ6IFRyYW5zYWN0aW9uQ29udGV4dCk6IFRyYW5zYWN0aW9uVHlwZSB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuX2NyZWF0ZVJvdXRlVHJhbnNhY3Rpb24oY29udGV4dCk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGJyZWFkY3J1bWIgYW5kIHNldHMgdGhlIGN1cnJlbnQgcm91dGUgYXMgYSB0YWcuXG4gICAqL1xuICBwcml2YXRlIF9vbkNvbmZpcm1Sb3V0ZShjb250ZXh0OiBUcmFuc2FjdGlvbkNvbnRleHQpOiB2b2lkIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzXG4gICAgdGhpcy5fY3VycmVudFJvdXRlID0gY29udGV4dC5kYXRhPy5yb3V0ZT8ubmFtZTtcblxuICAgIHRoaXMuX2dldEN1cnJlbnRIdWI/LigpLmNvbmZpZ3VyZVNjb3BlKHNjb3BlID0+IHtcbiAgICAgIGlmIChjb250ZXh0LmRhdGEpIHtcbiAgICAgICAgY29uc3QgY29udGV4dERhdGEgPSBjb250ZXh0LmRhdGEgYXMgUm91dGVDaGFuZ2VDb250ZXh0RGF0YTtcblxuICAgICAgICBzY29wZS5hZGRCcmVhZGNydW1iKHtcbiAgICAgICAgICBjYXRlZ29yeTogJ25hdmlnYXRpb24nLFxuICAgICAgICAgIHR5cGU6ICduYXZpZ2F0aW9uJyxcbiAgICAgICAgICAvLyBXZSBhc3N1bWUgdGhhdCBjb250ZXh0Lm5hbWUgaXMgdGhlIG5hbWUgb2YgdGhlIHJvdXRlLlxuICAgICAgICAgIG1lc3NhZ2U6IGBOYXZpZ2F0aW9uIHRvICR7Y29udGV4dC5uYW1lfWAsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgZnJvbTogY29udGV4dERhdGEucHJldmlvdXNSb3V0ZT8ubmFtZSxcbiAgICAgICAgICAgIHRvOiBjb250ZXh0RGF0YS5yb3V0ZS5uYW1lLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBzY29wZS5zZXRUYWcoJ3JvdXRpbmcucm91dGUubmFtZScsIGNvbnRleHQubmFtZSk7XG4gICAgfSk7XG4gIH1cblxuICAvKiogQ3JlYXRlIHJvdXRpbmcgaWRsZSB0cmFuc2FjdGlvbi4gKi9cbiAgcHJpdmF0ZSBfY3JlYXRlUm91dGVUcmFuc2FjdGlvbihjb250ZXh0OiBUcmFuc2FjdGlvbkNvbnRleHQpOiBJZGxlVHJhbnNhY3Rpb24gfCB1bmRlZmluZWQge1xuICAgIGlmICghdGhpcy5fZ2V0Q3VycmVudEh1Yikge1xuICAgICAgbG9nZ2VyLndhcm4oYFtSZWFjdE5hdGl2ZVRyYWNpbmddIERpZCBub3QgY3JlYXRlICR7Y29udGV4dC5vcH0gdHJhbnNhY3Rpb24gYmVjYXVzZSBfZ2V0Q3VycmVudEh1YiBpcyBpbnZhbGlkLmApO1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5faW5mbGlnaHRJbnRlcmFjdGlvblRyYW5zYWN0aW9uKSB7XG4gICAgICBsb2dnZXIubG9nKFxuICAgICAgICBgW1JlYWN0TmF0aXZlVHJhY2luZ10gQ2FuY2VsaW5nICR7dGhpcy5faW5mbGlnaHRJbnRlcmFjdGlvblRyYW5zYWN0aW9uLm9wfSB0cmFuc2FjdGlvbiBiZWNhdXNlIG5hdmlnYXRpb24gJHtjb250ZXh0Lm9wfS5gLFxuICAgICAgKTtcbiAgICAgIHRoaXMuX2luZmxpZ2h0SW50ZXJhY3Rpb25UcmFuc2FjdGlvbi5zZXRTdGF0dXMoJ2NhbmNlbGxlZCcpO1xuICAgICAgdGhpcy5faW5mbGlnaHRJbnRlcmFjdGlvblRyYW5zYWN0aW9uLmZpbmlzaCgpO1xuICAgIH1cblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvdW5ib3VuZC1tZXRob2RcbiAgICBjb25zdCB7IGlkbGVUaW1lb3V0TXMsIGZpbmFsVGltZW91dE1zIH0gPSB0aGlzLm9wdGlvbnM7XG5cbiAgICBjb25zdCBleHBhbmRlZENvbnRleHQgPSB7XG4gICAgICAuLi5jb250ZXh0LFxuICAgICAgdHJpbUVuZDogdHJ1ZSxcbiAgICB9O1xuXG4gICAgY29uc3QgaHViID0gdGhpcy5fZ2V0Q3VycmVudEh1YigpO1xuICAgIGNvbnN0IGlkbGVUcmFuc2FjdGlvbiA9IHN0YXJ0SWRsZVRyYW5zYWN0aW9uKGh1YiBhcyBIdWIsIGV4cGFuZGVkQ29udGV4dCwgaWRsZVRpbWVvdXRNcywgZmluYWxUaW1lb3V0TXMsIHRydWUpO1xuXG4gICAgdGhpcy5vblRyYW5zYWN0aW9uU3RhcnQoaWRsZVRyYW5zYWN0aW9uKTtcblxuICAgIGxvZ2dlci5sb2coYFtSZWFjdE5hdGl2ZVRyYWNpbmddIFN0YXJ0aW5nICR7Y29udGV4dC5vcH0gdHJhbnNhY3Rpb24gXCIke2NvbnRleHQubmFtZX1cIiBvbiBzY29wZWApO1xuXG4gICAgaWRsZVRyYW5zYWN0aW9uLnJlZ2lzdGVyQmVmb3JlRmluaXNoQ2FsbGJhY2soKHRyYW5zYWN0aW9uLCBlbmRUaW1lc3RhbXApID0+IHtcbiAgICAgIHRoaXMub25UcmFuc2FjdGlvbkZpbmlzaCh0cmFuc2FjdGlvbiwgZW5kVGltZXN0YW1wKTtcbiAgICB9KTtcblxuICAgIGlkbGVUcmFuc2FjdGlvbi5yZWdpc3RlckJlZm9yZUZpbmlzaENhbGxiYWNrKHRyYW5zYWN0aW9uID0+IHtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZW5hYmxlQXBwU3RhcnRUcmFja2luZyAmJiB0aGlzLl9hd2FpdGluZ0FwcFN0YXJ0RGF0YSkge1xuICAgICAgICB0cmFuc2FjdGlvbi5zdGFydFRpbWVzdGFtcCA9IHRoaXMuX2F3YWl0aW5nQXBwU3RhcnREYXRhLmFwcFN0YXJ0VGltZSAvIDEwMDA7XG4gICAgICAgIHRyYW5zYWN0aW9uLm9wID0gJ3VpLmxvYWQnO1xuXG4gICAgICAgIHRoaXMuX2FkZEFwcFN0YXJ0RGF0YSh0cmFuc2FjdGlvbiwgdGhpcy5fYXdhaXRpbmdBcHBTdGFydERhdGEpO1xuXG4gICAgICAgIHRoaXMuX2F3YWl0aW5nQXBwU3RhcnREYXRhID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWRsZVRyYW5zYWN0aW9uLnJlZ2lzdGVyQmVmb3JlRmluaXNoQ2FsbGJhY2soKHRyYW5zYWN0aW9uLCBlbmRUaW1lc3RhbXApID0+IHtcbiAgICAgIGFkanVzdFRyYW5zYWN0aW9uRHVyYXRpb24oZmluYWxUaW1lb3V0TXMsIHRyYW5zYWN0aW9uLCBlbmRUaW1lc3RhbXApO1xuICAgIH0pO1xuXG4gICAgaWYgKHRoaXMub3B0aW9ucy5pZ25vcmVFbXB0eUJhY2tOYXZpZ2F0aW9uVHJhbnNhY3Rpb25zKSB7XG4gICAgICBpZGxlVHJhbnNhY3Rpb24ucmVnaXN0ZXJCZWZvcmVGaW5pc2hDYWxsYmFjayh0cmFuc2FjdGlvbiA9PiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzXG4gICAgICAgICAgdHJhbnNhY3Rpb24uZGF0YT8ucm91dGU/Lmhhc0JlZW5TZWVuICYmXG4gICAgICAgICAgKCF0cmFuc2FjdGlvbi5zcGFuUmVjb3JkZXIgfHxcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uLnNwYW5SZWNvcmRlci5zcGFucy5maWx0ZXIoc3BhbiA9PiBzcGFuLnNwYW5JZCAhPT0gdHJhbnNhY3Rpb24uc3BhbklkKS5sZW5ndGggPT09IDApXG4gICAgICAgICkge1xuICAgICAgICAgIGxvZ2dlci5sb2coXG4gICAgICAgICAgICAnW1JlYWN0TmF0aXZlVHJhY2luZ10gTm90IHNhbXBsaW5nIHRyYW5zYWN0aW9uIGFzIHJvdXRlIGhhcyBiZWVuIHNlZW4gYmVmb3JlLiBQYXNzIGlnbm9yZUVtcHR5QmFja05hdmlnYXRpb25UcmFuc2FjdGlvbnMgPSBmYWxzZSB0byBkaXNhYmxlIHRoaXMgZmVhdHVyZS4nLFxuICAgICAgICAgICk7XG4gICAgICAgICAgLy8gUm91dGUgaGFzIGJlZW4gc2VlbiBiZWZvcmUgYW5kIGhhcyBubyBjaGlsZCBzcGFucy5cbiAgICAgICAgICB0cmFuc2FjdGlvbi5zYW1wbGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBpZGxlVHJhbnNhY3Rpb247XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFFQSxJQUFBQSxRQUFBLEdBQUFDLE9BQUE7QUFFQSxJQUFBQyxLQUFBLEdBQUFELE9BQUE7QUFFQSxJQUFBRSxNQUFBLEdBQUFGLE9BQUE7QUFFQSxJQUFBRyxhQUFBLEdBQUFILE9BQUE7QUFHQSxJQUFBSSxRQUFBLEdBQUFKLE9BQUE7QUFDQSxJQUFBSyxhQUFBLEdBQUFMLE9BQUE7QUFDQSxJQUFBTSxJQUFBLEdBQUFOLE9BQUE7QUFDQSxJQUFBTyxjQUFBLEdBQUFQLE9BQUE7QUFDQSxJQUFBUSxZQUFBLEdBQUFSLE9BQUE7QUFFQSxJQUFBUyxPQUFBLEdBQUFULE9BQUE7QUFnRkEsSUFBTVUsZ0NBQWdDLEdBQUFDLE1BQUEsQ0FBQUMsTUFBQSxDQUFBRCxNQUFBLENBQUFDLE1BQUEsS0FDakNDLDZDQUFvQztFQUN2Q0MsV0FBVyxFQUFFLElBQUk7RUFDakJDLHNCQUFzQixFQUFFLEdBQUc7RUFDM0JDLGFBQWEsRUFBRSxJQUFJO0VBQ25CQyxjQUFjLEVBQUUsTUFBTTtFQUN0QkMscUNBQXFDLEVBQUUs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