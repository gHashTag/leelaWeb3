cf35090ded4e2e06a9d7edd12ed6a383
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));
var __importDefault = this && this.__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useLeelaGame = void 0;
var react_1 = require("react");
var i18next_1 = __importDefault(require("i18next"));
var handlePlayerMovement_1 = require("./handlePlayerMovement");
var images_1 = require("./images");
var MAX_ROLL = 6;
var initialState = {
  currentPlayer: {
    id: 1,
    plan: 68,
    previousPlan: 68,
    isStart: false,
    isFinished: false,
    consecutiveSixes: 0,
    message: i18next_1.default.t('sixToBegin'),
    positionBeforeThreeSixes: 0,
    avatar: images_1.GEM_ICONS[1]
  },
  lastRoll: 1,
  rollHistory: [],
  planHistory: [68]
};
var reducer = function reducer(state, action) {
  switch (action.type) {
    case 'ROLL_DICE':
      var rollResult = Math.floor(Math.random() * MAX_ROLL) + 1;
      return Object.assign({}, state, {
        lastRoll: rollResult,
        rollHistory: [].concat((0, _toConsumableArray2.default)(state.rollHistory), [rollResult]),
        currentPlayer: (0, handlePlayerMovement_1.handlePlayerMovement)(state.currentPlayer, rollResult)
      });
    case 'UPDATE_PLAYER':
      return Object.assign({}, state, {
        currentPlayer: action.player
      });
    case 'SET_ROLL_HISTORY':
      return Object.assign({}, state, {
        rollHistory: action.rollHistory
      });
    case 'SET_PLAN_HISTORY':
      return Object.assign({}, state, {
        planHistory: action.planHistory
      });
    case 'SET_INITIAL_STATE':
      return action.initialState;
    default:
      return state;
  }
};
var useLeelaGame = function useLeelaGame() {
  var _ref = (0, react_1.useReducer)(reducer, initialState),
    _ref2 = (0, _slicedToArray2.default)(_ref, 2),
    state = _ref2[0],
    dispatch = _ref2[1];
  var rollDice = function rollDice() {
    dispatch({
      type: 'ROLL_DICE'
    });
  };
  var updatePlayer = function updatePlayer(player) {
    dispatch({
      type: 'UPDATE_PLAYER',
      player: player
    });
  };
  var setRollHistory = function setRollHistory(rollHistory) {
    dispatch({
      type: 'SET_ROLL_HISTORY',
      rollHistory: rollHistory
    });
  };
  var setPlanHistory = function setPlanHistory(planHistory) {
    dispatch({
      type: 'SET_PLAN_HISTORY',
      planHistory: planHistory
    });
  };
  return {
    currentPlayer: state.currentPlayer,
    rollHistory: state.rollHistory,
    planHistory: state.planHistory,
    rollDice: rollDice,
    lastRoll: state.lastRoll,
    updatePlayer: updatePlayer,
    setRollHistory: setRollHistory,
    setPlanHistory: setPlanHistory
  };
};
exports.useLeelaGame = useLeelaGame;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZWFjdF8xIiwicmVxdWlyZSIsImkxOG5leHRfMSIsIl9faW1wb3J0RGVmYXVsdCIsImhhbmRsZVBsYXllck1vdmVtZW50XzEiLCJpbWFnZXNfMSIsIk1BWF9ST0xMIiwiaW5pdGlhbFN0YXRlIiwiY3VycmVudFBsYXllciIsImlkIiwicGxhbiIsInByZXZpb3VzUGxhbiIsImlzU3RhcnQiLCJpc0ZpbmlzaGVkIiwiY29uc2VjdXRpdmVTaXhlcyIsIm1lc3NhZ2UiLCJkZWZhdWx0IiwidCIsInBvc2l0aW9uQmVmb3JlVGhyZWVTaXhlcyIsImF2YXRhciIsIkdFTV9JQ09OUyIsImxhc3RSb2xsIiwicm9sbEhpc3RvcnkiLCJwbGFuSGlzdG9yeSIsInJlZHVjZXIiLCJzdGF0ZSIsImFjdGlvbiIsInR5cGUiLCJyb2xsUmVzdWx0IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiT2JqZWN0IiwiYXNzaWduIiwiY29uY2F0IiwiX3RvQ29uc3VtYWJsZUFycmF5MiIsImhhbmRsZVBsYXllck1vdmVtZW50IiwicGxheWVyIiwidXNlTGVlbGFHYW1lIiwiX3JlZiIsInVzZVJlZHVjZXIiLCJfcmVmMiIsIl9zbGljZWRUb0FycmF5MiIsImRpc3BhdGNoIiwicm9sbERpY2UiLCJ1cGRhdGVQbGF5ZXIiLCJzZXRSb2xsSGlzdG9yeSIsInNldFBsYW5IaXN0b3J5IiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIi9Vc2Vycy9wbGF5cmEvTGVlbGFBaVdlYjMvc3JjL2hvb2tzL3VzZUxlZWxhR2FtZS91c2VMZWVsYUdhbWUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VSZWR1Y2VyIH0gZnJvbSAncmVhY3QnXG5cbi8vIGltcG9ydCBBc3luY1N0b3JhZ2UgZnJvbSAnQHJlYWN0LW5hdGl2ZS1hc3luYy1zdG9yYWdlL2FzeW5jLXN0b3JhZ2UnXG4vLyBpbXBvcnQgeyBjYXB0dXJlRXhjZXB0aW9uIH0gZnJvbSAnY29ucydcbmltcG9ydCBpMThuZXh0IGZyb20gJ2kxOG5leHQnXG5pbXBvcnQgeyBQbGF5ZXIgfSBmcm9tICd0eXBlcydcblxuaW1wb3J0IHsgaGFuZGxlUGxheWVyTW92ZW1lbnQgfSBmcm9tICcuL2hhbmRsZVBsYXllck1vdmVtZW50J1xuaW1wb3J0IHsgR0VNX0lDT05TIH0gZnJvbSAnLi9pbWFnZXMnXG5cbmNvbnN0IE1BWF9ST0xMID0gNlxuXG5pbnRlcmZhY2UgU3RhdGUge1xuICBjdXJyZW50UGxheWVyOiBQbGF5ZXJcbiAgbGFzdFJvbGw6IG51bWJlclxuICByb2xsSGlzdG9yeTogbnVtYmVyW11cbiAgcGxhbkhpc3Rvcnk6IG51bWJlcltdXG59XG5cbnR5cGUgQWN0aW9uID1cbiAgfCB7IHR5cGU6ICdST0xMX0RJQ0UnIH1cbiAgfCB7IHR5cGU6ICdVUERBVEVfUExBWUVSJzsgcGxheWVyOiBQbGF5ZXIgfVxuICB8IHsgdHlwZTogJ1NFVF9ST0xMX0hJU1RPUlknOyByb2xsSGlzdG9yeTogbnVtYmVyW10gfVxuICB8IHsgdHlwZTogJ1NFVF9QTEFOX0hJU1RPUlknOyBwbGFuSGlzdG9yeTogbnVtYmVyW10gfVxuICB8IHsgdHlwZTogJ1NFVF9JTklUSUFMX1NUQVRFJzsgaW5pdGlhbFN0YXRlOiBTdGF0ZSB9XG5cbmNvbnN0IGluaXRpYWxTdGF0ZTogU3RhdGUgPSB7XG4gIGN1cnJlbnRQbGF5ZXI6IHtcbiAgICBpZDogMSxcbiAgICBwbGFuOiA2OCxcbiAgICBwcmV2aW91c1BsYW46IDY4LFxuICAgIGlzU3RhcnQ6IGZhbHNlLFxuICAgIGlzRmluaXNoZWQ6IGZhbHNlLFxuICAgIGNvbnNlY3V0aXZlU2l4ZXM6IDAsXG4gICAgbWVzc2FnZTogaTE4bmV4dC50KCdzaXhUb0JlZ2luJyksXG4gICAgcG9zaXRpb25CZWZvcmVUaHJlZVNpeGVzOiAwLFxuICAgIGF2YXRhcjogR0VNX0lDT05TWzFdLFxuICB9LFxuICBsYXN0Um9sbDogMSxcbiAgcm9sbEhpc3Rvcnk6IFtdLFxuICBwbGFuSGlzdG9yeTogWzY4XSxcbn1cblxuY29uc3QgcmVkdWNlciA9IChzdGF0ZTogU3RhdGUsIGFjdGlvbjogQWN0aW9uKTogU3RhdGUgPT4ge1xuICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgY2FzZSAnUk9MTF9ESUNFJzpcbiAgICAgIGNvbnN0IHJvbGxSZXN1bHQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBNQVhfUk9MTCkgKyAxXG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgbGFzdFJvbGw6IHJvbGxSZXN1bHQsXG4gICAgICAgIHJvbGxIaXN0b3J5OiBbLi4uc3RhdGUucm9sbEhpc3RvcnksIHJvbGxSZXN1bHRdLFxuICAgICAgICBjdXJyZW50UGxheWVyOiBoYW5kbGVQbGF5ZXJNb3ZlbWVudChzdGF0ZS5jdXJyZW50UGxheWVyLCByb2xsUmVzdWx0KSxcbiAgICAgIH1cbiAgICBjYXNlICdVUERBVEVfUExBWUVSJzpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnN0YXRlLFxuICAgICAgICBjdXJyZW50UGxheWVyOiBhY3Rpb24ucGxheWVyLFxuICAgICAgfVxuICAgIGNhc2UgJ1NFVF9ST0xMX0hJU1RPUlknOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIHJvbGxIaXN0b3J5OiBhY3Rpb24ucm9sbEhpc3RvcnksXG4gICAgICB9XG4gICAgY2FzZSAnU0VUX1BMQU5fSElTVE9SWSc6XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgcGxhbkhpc3Rvcnk6IGFjdGlvbi5wbGFuSGlzdG9yeSxcbiAgICAgIH1cbiAgICBjYXNlICdTRVRfSU5JVElBTF9TVEFURSc6XG4gICAgICByZXR1cm4gYWN0aW9uLmluaXRpYWxTdGF0ZVxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gc3RhdGVcbiAgfVxufVxuXG5jb25zdCB1c2VMZWVsYUdhbWUgPSAoKSA9PiB7XG4gIGNvbnN0IFtzdGF0ZSwgZGlzcGF0Y2hdID0gdXNlUmVkdWNlcihyZWR1Y2VyLCBpbml0aWFsU3RhdGUpXG5cbiAgLy8gY29uc3QgZ2V0U2F2ZWRTdGF0ZSA9IGFzeW5jICgpID0+IHtcbiAgLy8gICB0cnkge1xuICAvLyAgICAgY29uc3Qgc2F2ZWRTdGF0ZSA9IGF3YWl0IEFzeW5jU3RvcmFnZS5nZXRJdGVtKCdsZWVsYUdhbWVTdGF0ZScpXG4gIC8vICAgICByZXR1cm4gc2F2ZWRTdGF0ZSA/IEpTT04ucGFyc2Uoc2F2ZWRTdGF0ZSkgOiBpbml0aWFsU3RhdGVcbiAgLy8gICB9IGNhdGNoIChlcnJvcikge1xuICAvLyAgICAgY2FwdHVyZUV4Y2VwdGlvbihlcnJvciwgJ0Vycm9yIHJldHJpZXZpbmcgc3RhdGUgZnJvbSBBc3luY1N0b3JhZ2U6JylcbiAgLy8gICAgIHJldHVybiBpbml0aWFsU3RhdGVcbiAgLy8gICB9XG4gIC8vIH1cblxuICAvLyB1c2VFZmZlY3QoKCkgPT4ge1xuICAvLyAgIGdldFNhdmVkU3RhdGUoKS50aGVuKChzYXZlZFN0YXRlKSA9PiB7XG4gIC8vICAgICBkaXNwYXRjaCh7IHR5cGU6ICdTRVRfSU5JVElBTF9TVEFURScsIGluaXRpYWxTdGF0ZTogc2F2ZWRTdGF0ZSB9KVxuICAvLyAgIH0pXG4gIC8vIH0sIFtdKVxuXG4gIC8vIC8vINCf0L7QtNC/0LjRgdC60LAg0L3QsCDQuNC30LzQtdC90LXQvdC40Y8g0YHRgtC10LnRgtCwINC4INGB0L7RhdGA0LDQvdC10L3QuNC1INCyIEFzeW5jU3RvcmFnZVxuICAvLyB1c2VFZmZlY3QoKCkgPT4ge1xuICAvLyAgIEFzeW5jU3RvcmFnZS5zZXRJdGVtKCdsZWVsYUdhbWVTdGF0ZScsIEpTT04uc3RyaW5naWZ5KHN0YXRlKSkuY2F0Y2goXG4gIC8vICAgICAoZXJyb3IpID0+IGNhcHR1cmVFeGNlcHRpb24oZXJyb3IsICdFcnJvciBzYXZpbmcgc3RhdGUgdG8gQXN5bmNTdG9yYWdlOicpLFxuICAvLyAgIClcbiAgLy8gfSwgW3N0YXRlXSlcblxuICBjb25zdCByb2xsRGljZSA9ICgpID0+IHtcbiAgICBkaXNwYXRjaCh7IHR5cGU6ICdST0xMX0RJQ0UnIH0pXG4gIH1cblxuICBjb25zdCB1cGRhdGVQbGF5ZXIgPSAocGxheWVyOiBQbGF5ZXIpID0+IHtcbiAgICBkaXNwYXRjaCh7IHR5cGU6ICdVUERBVEVfUExBWUVSJywgcGxheWVyIH0pXG4gIH1cblxuICBjb25zdCBzZXRSb2xsSGlzdG9yeSA9IChyb2xsSGlzdG9yeTogbnVtYmVyW10pID0+IHtcbiAgICBkaXNwYXRjaCh7IHR5cGU6ICdTRVRfUk9MTF9ISVNUT1JZJywgcm9sbEhpc3RvcnkgfSlcbiAgfVxuXG4gIGNvbnN0IHNldFBsYW5IaXN0b3J5ID0gKHBsYW5IaXN0b3J5OiBudW1iZXJbXSkgPT4ge1xuICAgIGRpc3BhdGNoKHsgdHlwZTogJ1NFVF9QTEFOX0hJU1RPUlknLCBwbGFuSGlzdG9yeSB9KVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBjdXJyZW50UGxheWVyOiBzdGF0ZS5jdXJyZW50UGxheWVyLFxuICAgIHJvbGxIaXN0b3J5OiBzdGF0ZS5yb2xsSGlzdG9yeSxcbiAgICBwbGFuSGlzdG9yeTogc3RhdGUucGxhbkhpc3RvcnksXG4gICAgcm9sbERpY2UsXG4gICAgbGFzdFJvbGw6IHN0YXRlLmxhc3RSb2xsLFxuICAgIHVwZGF0ZVBsYXllcixcbiAgICBzZXRSb2xsSGlzdG9yeSxcbiAgICBzZXRQbGFuSGlzdG9yeSxcbiAgfVxufVxuXG5leHBvcnQgeyB1c2VMZWVsYUdhbWUgfVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFBLElBQUFBLE9BQUEsR0FBQUMsT0FBQTtBQUlBLElBQUFDLFNBQUEsR0FBQUMsZUFBQSxDQUFBRixPQUFBO0FBR0EsSUFBQUcsc0JBQUEsR0FBQUgsT0FBQTtBQUNBLElBQUFJLFFBQUEsR0FBQUosT0FBQTtBQUVBLElBQU1LLFFBQVEsR0FBRyxDQUFDO0FBZ0JsQixJQUFNQyxZQUFZLEdBQVU7RUFDMUJDLGFBQWEsRUFBRTtJQUNiQyxFQUFFLEVBQUUsQ0FBQztJQUNM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