{"version":3,"names":["_utils","require","_wrapper","Screenshot","_classCallCheck2","default","name","id","_createClass2","key","value","setupOnce","attachScreenshotToEventHint","hint","_ref","attachScreenshot","resolvedSyncPromise","NATIVE","captureScreenshot","then","screenshots","length","attachments","concat","_toConsumableArray2","exports"],"sources":["../../../src/js/integrations/screenshot.ts"],"sourcesContent":["import type { EventHint, Integration } from '@sentry/types';\nimport { resolvedSyncPromise } from '@sentry/utils';\n\nimport { NATIVE } from '../wrapper';\n\n/** Adds screenshots to error events */\nexport class Screenshot implements Integration {\n  /**\n   * @inheritDoc\n   */\n  public static id: string = 'Screenshot';\n\n  /**\n   * @inheritDoc\n   */\n  public name: string = Screenshot.id;\n\n  /**\n   * If enabled attaches a screenshot to the event hint.\n   */\n  public static attachScreenshotToEventHint(\n    hint: EventHint,\n    { attachScreenshot }: { attachScreenshot?: boolean },\n  ): PromiseLike<EventHint> {\n    if (!attachScreenshot) {\n      return resolvedSyncPromise(hint);\n    }\n\n    return NATIVE.captureScreenshot().then(screenshots => {\n      if (screenshots !== null && screenshots.length > 0) {\n        hint.attachments = [...screenshots, ...(hint?.attachments || [])];\n      }\n      return hint;\n    });\n  }\n\n  /**\n   * @inheritDoc\n   */\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  public setupOnce(): void {}\n}\n"],"mappings":";;;;;;;;AACA,IAAAA,MAAA,GAAAC,OAAA;AAEA,IAAAC,QAAA,GAAAD,OAAA;AAAoC,IAGvBE,UAAU;EAAvB,SAAAA,WAAA;IAAA,IAAAC,gBAAA,CAAAC,OAAA,QAAAF,UAAA;IASS,KAAAG,IAAI,GAAWH,UAAU,CAACI,EAAE;EA0BrC;EAAC,IAAAC,aAAA,CAAAH,OAAA,EAAAF,UAAA;IAAAM,GAAA;IAAAC,KAAA,EADQ,SAAAC,UAAA,EAAS,CAAU;EAAC;IAAAF,GAAA;IAAAC,KAAA,EApBpB,SAAAE,4BACLC,IAAe,EAAAC,IAAA,EACqC;MAAA,IAAlDC,gBAAgB,GAAAD,IAAA,CAAhBC,gBAAgB;MAElB,IAAI,CAACA,gBAAgB,EAAE;QACrB,OAAO,IAAAC,0BAAmB,EAACH,IAAI,CAAC;;MAGlC,OAAOI,eAAM,CAACC,iBAAiB,EAAE,CAACC,IAAI,CAAC,UAAAC,WAAW,EAAG;QACnD,IAAIA,WAAW,KAAK,IAAI,IAAIA,WAAW,CAACC,MAAM,GAAG,CAAC,EAAE;UAClDR,IAAI,CAACS,WAAW,MAAAC,MAAA,KAAAC,mBAAA,CAAAnB,OAAA,EAAOe,WAAW,OAAAI,mBAAA,CAAAnB,OAAA,EAAM,CAAAQ,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAES,WAAW,KAAI,EAAE,EAAE;;QAEnE,OAAOT,IAAI;MACb,CAAC,CAAC;IACJ;EAAC;EAAA,OAAAV,UAAA;AAAA;AAAAsB,OAAA,CAAAtB,UAAA,GAAAA,UAAA;AAxBaA,UAAA,CAAAI,EAAE,GAAW,YAAY"}