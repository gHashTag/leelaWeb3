{"version":3,"names":["_reactNative","require","AppleNativePrefix","AppleWebPrefix","GooglePrefix","AmazonPrefix","AndroidMarket","Google","Amazon","Other","exports","noop","Rate","_classCallCheck2","default","_createClass2","key","value","filterOptions","inputOptions","options","AppleAppID","GooglePackageName","AmazonPackageName","OtherAndroidURL","preferredAndroidMarket","preferInApp","openAppStoreIfInAppFails","inAppDelay","fallbackPlatformURL","Object","keys","forEach","rate","callback","arguments","length","undefined","RNRate","NativeModules","Platform","OS","response","error","openURL","url","Linking","canOpenURL","then","supported"],"sources":["index.js"],"sourcesContent":["import { Platform, Linking, NativeModules } from 'react-native'\n\nconst AppleNativePrefix = 'itms-apps://itunes.apple.com/app/id'\nconst AppleWebPrefix = 'https://itunes.apple.com/app/id'\nconst GooglePrefix = 'https://play.google.com/store/apps/details?id='\nconst AmazonPrefix = 'amzn://apps/android?p='\n\nexport const AndroidMarket = {\n  Google: 1,\n  Amazon: 2,\n  Other: 3,\n}\n\nconst noop = () => {}\n\nexport default class Rate {\n  static filterOptions(inputOptions) {\n    const options = {\n      AppleAppID: '',\n      GooglePackageName: '',\n      AmazonPackageName: '',\n      OtherAndroidURL: '',\n      preferredAndroidMarket: AndroidMarket.Google,\n      preferInApp: false,\n      openAppStoreIfInAppFails: true,\n      inAppDelay: 3.0,\n      fallbackPlatformURL: '',\n    }\n    Object.keys(inputOptions).forEach((key) => {\n      options[key] = inputOptions[key]\n    })\n    return options\n  }\n\n  static rate(inputOptions, callback = noop) {\n    const { RNRate } = NativeModules\n    const options = Rate.filterOptions(inputOptions)\n    if (Platform.OS === 'ios') {\n      options.AppleNativePrefix = AppleNativePrefix\n      RNRate.rate(options, (response, error) => {\n        callback(response, error)\n      })\n    } else if (Platform.OS === 'android') {\n      if (options.preferredAndroidMarket === AndroidMarket.Google) {\n        if (options.preferInApp) {\n          RNRate.rate(options, (response, error)=>{\n            if (!response) {\n              if (options.openAppStoreIfInAppFails) {\n                Rate.openURL(GooglePrefix + options.GooglePackageName, callback)\n              } else {\n                callback(false, error)\n              }\n            } else {\n              callback(response, error)\n            }\n          })\n        } else {\n          Rate.openURL(GooglePrefix + options.GooglePackageName, callback)\n        }\n      } else if (options.preferredAndroidMarket === AndroidMarket.Amazon) {\n        Rate.openURL(AmazonPrefix + options.AmazonPackageName, callback)\n      } else if (options.preferredAndroidMarket === AndroidMarket.Other) {\n        Rate.openURL(options.OtherAndroidURL, callback)\n      }\n    } else {\n      Rate.openURL(options.fallbackPlatformURL, callback)\n    }\n  }\n\n  static openURL(url, callback = noop) {\n    Linking.canOpenURL(url).then((supported) => {\n      callback(supported)\n      if (supported) {\n        Linking.openURL(url)\n      }\n    })\n  }\n}\n"],"mappings":"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"}