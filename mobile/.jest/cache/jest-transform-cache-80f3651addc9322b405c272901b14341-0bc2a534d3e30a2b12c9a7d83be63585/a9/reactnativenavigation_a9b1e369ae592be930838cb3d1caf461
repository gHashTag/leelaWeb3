bf12dfca92bc654d0a52bec738a630bb
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ReactNativeNavigationInstrumentation = void 0;
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _get2 = _interopRequireDefault(require("@babel/runtime/helpers/get"));
var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));
var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));
var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));
var _utils = require("@sentry/utils");
var _routingInstrumentation = require("./routingInstrumentation");
var _utils2 = require("./utils");
function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }
function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }
var defaultOptions = {
  routeChangeTimeoutMs: 1000,
  enableTabsInstrumentation: true
};
var ReactNativeNavigationInstrumentation = function (_InternalRoutingInstr) {
  (0, _inherits2.default)(ReactNativeNavigationInstrumentation, _InternalRoutingInstr);
  var _super = _createSuper(ReactNativeNavigationInstrumentation);
  function ReactNativeNavigationInstrumentation(navigation) {
    var _this;
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    (0, _classCallCheck2.default)(this, ReactNativeNavigationInstrumentation);
    _this = _super.call(this);
    _this.name = ReactNativeNavigationInstrumentation.instrumentationName;
    _this._prevComponentEvent = null;
    _this._recentComponentIds = [];
    _this._navigation = navigation;
    _this._options = Object.assign(Object.assign({}, defaultOptions), options);
    return _this;
  }
  (0, _createClass2.default)(ReactNativeNavigationInstrumentation, [{
    key: "registerRoutingInstrumentation",
    value: function registerRoutingInstrumentation(listener, beforeNavigate, onConfirmRoute) {
      (0, _get2.default)((0, _getPrototypeOf2.default)(ReactNativeNavigationInstrumentation.prototype), "registerRoutingInstrumentation", this).call(this, listener, beforeNavigate, onConfirmRoute);
      this._navigation.events().registerCommandListener(this._onNavigation.bind(this));
      if (this._options.enableTabsInstrumentation) {
        this._navigation.events().registerBottomTabPressedListener(this._onNavigation.bind(this));
      }
      this._navigation.events().registerComponentWillAppearListener(this._onComponentWillAppear.bind(this));
    }
  }, {
    key: "_onNavigation",
    value: function _onNavigation() {
      if (this._latestTransaction) {
        this._discardLatestTransaction();
      }
      this._latestTransaction = this.onRouteWillChange((0, _utils2.getBlankTransactionContext)(ReactNativeNavigationInstrumentation.name));
      this._stateChangeTimeout = setTimeout(this._discardLatestTransaction.bind(this), this._options.routeChangeTimeoutMs);
    }
  }, {
    key: "_onComponentWillAppear",
    value: function _onComponentWillAppear(event) {
      var _a, _b;
      if (!this._latestTransaction) {
        return;
      }
      var isSameComponent = this._prevComponentEvent && event.componentId === this._prevComponentEvent.componentId;
      if (isSameComponent) {
        this._discardLatestTransaction();
        return;
      }
      this._clearStateChangeTimeout();
      var originalContext = this._latestTransaction.toContext();
      var routeHasBeenSeen = this._recentComponentIds.includes(event.componentId);
      var data = Object.assign(Object.assign({}, originalContext.data), {
        route: Object.assign(Object.assign({}, event), {
          name: event.componentName,
          hasBeenSeen: routeHasBeenSeen
        }),
        previousRoute: this._prevComponentEvent ? Object.assign(Object.assign({}, this._prevComponentEvent), {
          name: (_a = this._prevComponentEvent) === null || _a === void 0 ? void 0 : _a.componentName
        }) : null
      });
      var updatedContext = Object.assign(Object.assign({}, originalContext), {
        name: event.componentName,
        tags: Object.assign(Object.assign({}, originalContext.tags), {
          'routing.route.name': event.componentName
        }),
        data: data
      });
      var finalContext = this._prepareFinalContext(updatedContext);
      this._latestTransaction.updateWithContext(finalContext);
      var isCustomName = updatedContext.name !== finalContext.name;
      this._latestTransaction.setName(finalContext.name, isCustomName ? _utils2.customTransactionSource : _utils2.defaultTransactionSource);
      (_b = this._onConfirmRoute) === null || _b === void 0 ? void 0 : _b.call(this, finalContext);
      this._prevComponentEvent = event;
      this._latestTransaction = undefined;
    }
  }, {
    key: "_prepareFinalContext",
    value: function _prepareFinalContext(updatedContext) {
      var _a;
      var finalContext = (_a = this._beforeNavigate) === null || _a === void 0 ? void 0 : _a.call(this, Object.assign({}, updatedContext));
      if (!finalContext) {
        _utils.logger.error(`[${ReactNativeNavigationInstrumentation.name}] beforeNavigate returned ${finalContext}, return context.sampled = false to not send transaction.`);
        finalContext = Object.assign(Object.assign({}, updatedContext), {
          sampled: false
        });
      }
      if (finalContext.sampled === false) {
        _utils.logger.log(`[${ReactNativeNavigationInstrumentation.name}] Will not send transaction "${finalContext.name}" due to beforeNavigate.`);
      }
      return finalContext;
    }
  }, {
    key: "_discardLatestTransaction",
    value: function _discardLatestTransaction() {
      if (this._latestTransaction) {
        this._latestTransaction.sampled = false;
        this._latestTransaction.finish();
        this._latestTransaction = undefined;
      }
      this._clearStateChangeTimeout();
    }
  }, {
    key: "_clearStateChangeTimeout",
    value: function _clearStateChangeTimeout() {
      if (typeof this._stateChangeTimeout !== 'undefined') {
        clearTimeout(this._stateChangeTimeout);
        this._stateChangeTimeout = undefined;
      }
    }
  }]);
  return ReactNativeNavigationInstrumentation;
}(_routingInstrumentation.InternalRoutingInstrumentation);
exports.ReactNativeNavigationInstrumentation = ReactNativeNavigationInstrumentation;
ReactNativeNavigationInstrumentation.instrumentationName = 'react-native-navigation';
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfdXRpbHMiLCJyZXF1aXJlIiwiX3JvdXRpbmdJbnN0cnVtZW50YXRpb24iLCJfdXRpbHMyIiwiX2NyZWF0ZVN1cGVyIiwiRGVyaXZlZCIsImhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QiLCJfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0IiwiX2NyZWF0ZVN1cGVySW50ZXJuYWwiLCJTdXBlciIsIl9nZXRQcm90b3R5cGVPZjIiLCJkZWZhdWx0IiwicmVzdWx0IiwiTmV3VGFyZ2V0IiwiY29uc3RydWN0b3IiLCJSZWZsZWN0IiwiY29uc3RydWN0IiwiYXJndW1lbnRzIiwiYXBwbHkiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIiLCJzaGFtIiwiUHJveHkiLCJCb29sZWFuIiwicHJvdG90eXBlIiwidmFsdWVPZiIsImNhbGwiLCJlIiwiZGVmYXVsdE9wdGlvbnMiLCJyb3V0ZUNoYW5nZVRpbWVvdXRNcyIsImVuYWJsZVRhYnNJbnN0cnVtZW50YXRpb24iLCJSZWFjdE5hdGl2ZU5hdmlnYXRpb25JbnN0cnVtZW50YXRpb24iLCJfSW50ZXJuYWxSb3V0aW5nSW5zdHIiLCJfaW5oZXJpdHMyIiwiX3N1cGVyIiwibmF2aWdhdGlvbiIsIl90aGlzIiwib3B0aW9ucyIsImxlbmd0aCIsInVuZGVmaW5lZCIsIl9jbGFzc0NhbGxDaGVjazIiLCJuYW1lIiwiaW5zdHJ1bWVudGF0aW9uTmFtZSIsIl9wcmV2Q29tcG9uZW50RXZlbnQiLCJfcmVjZW50Q29tcG9uZW50SWRzIiwiX25hdmlnYXRpb24iLCJfb3B0aW9ucyIsIk9iamVjdCIsImFzc2lnbiIsIl9jcmVhdGVDbGFzczIiLCJrZXkiLCJ2YWx1ZSIsInJlZ2lzdGVyUm91dGluZ0luc3RydW1lbnRhdGlvbiIsImxpc3RlbmVyIiwiYmVmb3JlTmF2aWdhdGUiLCJvbkNvbmZpcm1Sb3V0ZSIsIl9nZXQyIiwiZXZlbnRzIiwicmVnaXN0ZXJDb21tYW5kTGlzdGVuZXIiLCJfb25OYXZpZ2F0aW9uIiwiYmluZCIsInJlZ2lzdGVyQm90dG9tVGFiUHJlc3NlZExpc3RlbmVyIiwicmVnaXN0ZXJDb21wb25lbnRXaWxsQXBwZWFyTGlzdGVuZXIiLCJfb25Db21wb25lbnRXaWxsQXBwZWFyIiwiX2xhdGVzdFRyYW5zYWN0aW9uIiwiX2Rpc2NhcmRMYXRlc3RUcmFuc2FjdGlvbiIsIm9uUm91dGVXaWxsQ2hhbmdlIiwiZ2V0QmxhbmtUcmFuc2FjdGlvbkNvbnRleHQiLCJfc3RhdGVDaGFuZ2VUaW1lb3V0Iiwic2V0VGltZW91dCIsImV2ZW50IiwiaXNTYW1lQ29tcG9uZW50IiwiY29tcG9uZW50SWQiLCJfY2xlYXJTdGF0ZUNoYW5nZVRpbWVvdXQiLCJvcmlnaW5hbENvbnRleHQiLCJ0b0NvbnRleHQiLCJyb3V0ZUhhc0JlZW5TZWVuIiwiaW5jbHVkZXMiLCJkYXRhIiwicm91dGUiLCJjb21wb25lbnROYW1lIiwiaGFzQmVlblNlZW4iLCJwcmV2aW91c1JvdXRlIiwiX2EiLCJ1cGRhdGVkQ29udGV4dCIsInRhZ3MiLCJmaW5hbENvbnRleHQiLCJfcHJlcGFyZUZpbmFsQ29udGV4dCIsInVwZGF0ZVdpdGhDb250ZXh0IiwiaXNDdXN0b21OYW1lIiwic2V0TmFtZSIsImN1c3RvbVRyYW5zYWN0aW9uU291cmNlIiwiZGVmYXVsdFRyYW5zYWN0aW9uU291cmNlIiwiX2IiLCJfb25Db25maXJtUm91dGUiLCJfYmVmb3JlTmF2aWdhdGUiLCJsb2dnZXIiLCJlcnJvciIsInNhbXBsZWQiLCJsb2ciLCJmaW5pc2giLCJjbGVhclRpbWVvdXQiLCJJbnRlcm5hbFJvdXRpbmdJbnN0cnVtZW50YXRpb24iLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2pzL3RyYWNpbmcvcmVhY3RuYXRpdmVuYXZpZ2F0aW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgVHJhbnNhY3Rpb24gYXMgVHJhbnNhY3Rpb25UeXBlLCBUcmFuc2FjdGlvbkNvbnRleHQgfSBmcm9tICdAc2VudHJ5L3R5cGVzJztcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJ0BzZW50cnkvdXRpbHMnO1xuaW1wb3J0IHR5cGUgeyBFbWl0dGVyU3Vic2NyaXB0aW9uIH0gZnJvbSAncmVhY3QtbmF0aXZlL0xpYnJhcmllcy92ZW5kb3IvZW1pdHRlci9FdmVudEVtaXR0ZXInO1xuXG5pbXBvcnQgdHlwZSB7IE9uQ29uZmlybVJvdXRlLCBUcmFuc2FjdGlvbkNyZWF0b3IgfSBmcm9tICcuL3JvdXRpbmdJbnN0cnVtZW50YXRpb24nO1xuaW1wb3J0IHsgSW50ZXJuYWxSb3V0aW5nSW5zdHJ1bWVudGF0aW9uIH0gZnJvbSAnLi9yb3V0aW5nSW5zdHJ1bWVudGF0aW9uJztcbmltcG9ydCB0eXBlIHsgQmVmb3JlTmF2aWdhdGUsIFJvdXRlQ2hhbmdlQ29udGV4dERhdGEgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IGN1c3RvbVRyYW5zYWN0aW9uU291cmNlLCBkZWZhdWx0VHJhbnNhY3Rpb25Tb3VyY2UsIGdldEJsYW5rVHJhbnNhY3Rpb25Db250ZXh0IH0gZnJvbSAnLi91dGlscyc7XG5cbmludGVyZmFjZSBSZWFjdE5hdGl2ZU5hdmlnYXRpb25PcHRpb25zIHtcbiAgLyoqXG4gICAqIEhvdyBsb25nIHRoZSBpbnN0cnVtZW50YXRpb24gd2lsbCB3YWl0IGZvciB0aGUgcm91dGUgdG8gbW91bnQgYWZ0ZXIgYSBjaGFuZ2UgaGFzIGJlZW4gaW5pdGlhdGVkLFxuICAgKiBiZWZvcmUgdGhlIHRyYW5zYWN0aW9uIGlzIGRpc2NhcmRlZC5cbiAgICogVGltZSBpcyBpbiBtcy5cbiAgICpcbiAgICogRGVmYXVsdDogMTAwMFxuICAgKi9cbiAgcm91dGVDaGFuZ2VUaW1lb3V0TXM6IG51bWJlcjtcbiAgLyoqXG4gICAqIEluc3RydW1lbnRhdGlvbiB3aWxsIGNyZWF0ZSBhIHRyYW5zYWN0aW9uIG9uIHRhYiBjaGFuZ2UuXG4gICAqIEJ5IGRlZmF1bHQgb25seSBuYXZpZ2F0aW9uIGNvbW1hbmRzIGNyZWF0ZSB0cmFuc2FjdGlvbnMuXG4gICAqXG4gICAqIERlZmF1bHQ6IHRydWVcbiAgICovXG4gIGVuYWJsZVRhYnNJbnN0cnVtZW50YXRpb246IGJvb2xlYW47XG59XG5cbmNvbnN0IGRlZmF1bHRPcHRpb25zOiBSZWFjdE5hdGl2ZU5hdmlnYXRpb25PcHRpb25zID0ge1xuICByb3V0ZUNoYW5nZVRpbWVvdXRNczogMTAwMCxcbiAgZW5hYmxlVGFic0luc3RydW1lbnRhdGlvbjogdHJ1ZSxcbn07XG5cbmludGVyZmFjZSBDb21wb25lbnRFdmVudCB7XG4gIGNvbXBvbmVudElkOiBzdHJpbmc7XG59XG5cbnR5cGUgQ29tcG9uZW50VHlwZSA9ICdDb21wb25lbnQnIHwgJ1RvcEJhclRpdGxlJyB8ICdUb3BCYXJCYWNrZ3JvdW5kJyB8ICdUb3BCYXJCdXR0b24nO1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBvbmVudFdpbGxBcHBlYXJFdmVudCBleHRlbmRzIENvbXBvbmVudEV2ZW50IHtcbiAgY29tcG9uZW50TmFtZTogc3RyaW5nO1xuICBwYXNzUHJvcHM/OiBSZWNvcmQ8c3RyaW5nIHwgbnVtYmVyIHwgc3ltYm9sLCB1bmtub3duPjtcbiAgY29tcG9uZW50VHlwZTogQ29tcG9uZW50VHlwZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFdmVudFN1YnNjcmlwdGlvbiB7XG4gIHJlbW92ZSgpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJvdHRvbVRhYlByZXNzZWRFdmVudCB7XG4gIHRhYkluZGV4OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRXZlbnRzUmVnaXN0cnkge1xuICByZWdpc3RlckNvbXBvbmVudFdpbGxBcHBlYXJMaXN0ZW5lcihjYWxsYmFjazogKGV2ZW50OiBDb21wb25lbnRXaWxsQXBwZWFyRXZlbnQpID0+IHZvaWQpOiBFbWl0dGVyU3Vic2NyaXB0aW9uO1xuICByZWdpc3RlckNvbW1hbmRMaXN0ZW5lcihjYWxsYmFjazogKG5hbWU6IHN0cmluZywgcGFyYW1zOiB1bmtub3duKSA9PiB2b2lkKTogRXZlbnRTdWJzY3JpcHRpb247XG4gIHJlZ2lzdGVyQm90dG9tVGFiUHJlc3NlZExpc3RlbmVyKGNhbGxiYWNrOiAoZXZlbnQ6IEJvdHRvbVRhYlByZXNzZWRFdmVudCkgPT4gdm9pZCk6IEVtaXR0ZXJTdWJzY3JpcHRpb247XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTmF2aWdhdGlvbkRlbGVnYXRlIHtcbiAgZXZlbnRzOiAoKSA9PiBFdmVudHNSZWdpc3RyeTtcbn1cblxuLyoqXG4gKiBJbnN0cnVtZW50YXRpb24gZm9yIFJlYWN0IE5hdGl2ZSBOYXZpZ2F0aW9uLiBTZWUgZG9jcyBvciBzYW1wbGUgYXBwIGZvciB1c2FnZS5cbiAqXG4gKiBIb3cgdGhpcyB3b3JrczpcbiAqIC0gYF9vbkNvbW1hbmRgIGlzIGNhbGxlZCBldmVyeSB0aW1lIGEgY29tbWFuZHMgaGFwcGVucyBhbmQgc2V0cyBhbiBJZGxlVHJhbnNhY3Rpb24gb24gdGhlIHNjb3BlIHdpdGhvdXQgYW55IHJvdXRlIGNvbnRleHQuXG4gKiAtIGBfb25Db21wb25lbnRXaWxsQXBwZWFyYCBpcyB0aGVuIGNhbGxlZCBBRlRFUiB0aGUgc3RhdGUgY2hhbmdlIGhhcHBlbnMgZHVlIHRvIGEgZGlzcGF0Y2ggYW5kIHNldHMgdGhlIHJvdXRlIGNvbnRleHQgb250byB0aGUgYWN0aXZlIHRyYW5zYWN0aW9uLlxuICogLSBJZiBgX29uQ29tcG9uZW50V2lsbEFwcGVhcmAgaXNuJ3QgY2FsbGVkIHdpdGhpbiBgb3B0aW9ucy5yb3V0ZUNoYW5nZVRpbWVvdXRNc2Agb2YgdGhlIGRpc3BhdGNoLCB0aGVuIHRoZSB0cmFuc2FjdGlvbiBpcyBub3Qgc2FtcGxlZCBhbmQgZmluaXNoZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBSZWFjdE5hdGl2ZU5hdmlnYXRpb25JbnN0cnVtZW50YXRpb24gZXh0ZW5kcyBJbnRlcm5hbFJvdXRpbmdJbnN0cnVtZW50YXRpb24ge1xuICBwdWJsaWMgc3RhdGljIGluc3RydW1lbnRhdGlvbk5hbWU6IHN0cmluZyA9ICdyZWFjdC1uYXRpdmUtbmF2aWdhdGlvbic7XG5cbiAgcHVibGljIHJlYWRvbmx5IG5hbWU6IHN0cmluZyA9IFJlYWN0TmF0aXZlTmF2aWdhdGlvbkluc3RydW1lbnRhdGlvbi5pbnN0cnVtZW50YXRpb25OYW1lO1xuXG4gIHByaXZhdGUgX25hdmlnYXRpb246IE5hdmlnYXRpb25EZWxlZ2F0ZTtcbiAgcHJpdmF0ZSBfb3B0aW9uczogUmVhY3ROYXRpdmVOYXZpZ2F0aW9uT3B0aW9ucztcblxuICBwcml2YXRlIF9wcmV2Q29tcG9uZW50RXZlbnQ6IENvbXBvbmVudFdpbGxBcHBlYXJFdmVudCB8IG51bGwgPSBudWxsO1xuXG4gIHByaXZhdGUgX2xhdGVzdFRyYW5zYWN0aW9uPzogVHJhbnNhY3Rpb25UeXBlO1xuICBwcml2YXRlIF9yZWNlbnRDb21wb25lbnRJZHM6IHN0cmluZ1tdID0gW107XG4gIHByaXZhdGUgX3N0YXRlQ2hhbmdlVGltZW91dD86IG51bWJlciB8IHVuZGVmaW5lZDtcblxuICBwdWJsaWMgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSByZWFjdCBuYXRpdmUgbmF2aWdhdGlvbiBgTmF2aWdhdGlvbkRlbGVnYXRlYC4gVGhpcyBpcyB1c3VhbGx5IHRoZSBpbXBvcnQgbmFtZWQgYE5hdmlnYXRpb25gLiAqL1xuICAgIG5hdmlnYXRpb246IHVua25vd24sXG4gICAgb3B0aW9uczogUGFydGlhbDxSZWFjdE5hdGl2ZU5hdmlnYXRpb25PcHRpb25zPiA9IHt9LFxuICApIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5fbmF2aWdhdGlvbiA9IG5hdmlnYXRpb24gYXMgTmF2aWdhdGlvbkRlbGVnYXRlO1xuXG4gICAgdGhpcy5fb3B0aW9ucyA9IHtcbiAgICAgIC4uLmRlZmF1bHRPcHRpb25zLFxuICAgICAgLi4ub3B0aW9ucyxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyB0aGUgZXZlbnQgbGlzdGVuZXJzIGZvciBSZWFjdCBOYXRpdmUgTmF2aWdhdGlvblxuICAgKi9cbiAgcHVibGljIHJlZ2lzdGVyUm91dGluZ0luc3RydW1lbnRhdGlvbihcbiAgICBsaXN0ZW5lcjogVHJhbnNhY3Rpb25DcmVhdG9yLFxuICAgIGJlZm9yZU5hdmlnYXRlOiBCZWZvcmVOYXZpZ2F0ZSxcbiAgICBvbkNvbmZpcm1Sb3V0ZTogT25Db25maXJtUm91dGUsXG4gICk6IHZvaWQge1xuICAgIHN1cGVyLnJlZ2lzdGVyUm91dGluZ0luc3RydW1lbnRhdGlvbihsaXN0ZW5lciwgYmVmb3JlTmF2aWdhdGUsIG9uQ29uZmlybVJvdXRlKTtcblxuICAgIHRoaXMuX25hdmlnYXRpb24uZXZlbnRzKCkucmVnaXN0ZXJDb21tYW5kTGlzdGVuZXIodGhpcy5fb25OYXZpZ2F0aW9uLmJpbmQodGhpcykpO1xuXG4gICAgaWYgKHRoaXMuX29wdGlvbnMuZW5hYmxlVGFic0luc3RydW1lbnRhdGlvbikge1xuICAgICAgdGhpcy5fbmF2aWdhdGlvbi5ldmVudHMoKS5yZWdpc3RlckJvdHRvbVRhYlByZXNzZWRMaXN0ZW5lcih0aGlzLl9vbk5hdmlnYXRpb24uYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgdGhpcy5fbmF2aWdhdGlvbi5ldmVudHMoKS5yZWdpc3RlckNvbXBvbmVudFdpbGxBcHBlYXJMaXN0ZW5lcih0aGlzLl9vbkNvbXBvbmVudFdpbGxBcHBlYXIuYmluZCh0aGlzKSk7XG4gIH1cblxuICAvKipcbiAgICogVG8gYmUgY2FsbGVkIHdoZW4gYSBuYXZpZ2F0aW9uIGlzIGluaXRpYXRlZC4gKENvbW1hbmQsIEJvdHRvbVRhYlNlbGVjdGVkLCBldGMuKVxuICAgKi9cbiAgcHJpdmF0ZSBfb25OYXZpZ2F0aW9uKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9sYXRlc3RUcmFuc2FjdGlvbikge1xuICAgICAgdGhpcy5fZGlzY2FyZExhdGVzdFRyYW5zYWN0aW9uKCk7XG4gICAgfVxuXG4gICAgdGhpcy5fbGF0ZXN0VHJhbnNhY3Rpb24gPSB0aGlzLm9uUm91dGVXaWxsQ2hhbmdlKFxuICAgICAgZ2V0QmxhbmtUcmFuc2FjdGlvbkNvbnRleHQoUmVhY3ROYXRpdmVOYXZpZ2F0aW9uSW5zdHJ1bWVudGF0aW9uLm5hbWUpLFxuICAgICk7XG5cbiAgICB0aGlzLl9zdGF0ZUNoYW5nZVRpbWVvdXQgPSBzZXRUaW1lb3V0KFxuICAgICAgdGhpcy5fZGlzY2FyZExhdGVzdFRyYW5zYWN0aW9uLmJpbmQodGhpcyksXG4gICAgICB0aGlzLl9vcHRpb25zLnJvdXRlQ2hhbmdlVGltZW91dE1zLFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogVG8gYmUgY2FsbGVkIEFGVEVSIHRoZSBzdGF0ZSBoYXMgYmVlbiBjaGFuZ2VkIHRvIHBvcHVsYXRlIHRoZSB0cmFuc2FjdGlvbiB3aXRoIHRoZSBjdXJyZW50IHJvdXRlLlxuICAgKi9cbiAgcHJpdmF0ZSBfb25Db21wb25lbnRXaWxsQXBwZWFyKGV2ZW50OiBDb21wb25lbnRXaWxsQXBwZWFyRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2xhdGVzdFRyYW5zYWN0aW9uKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gV2UgaWdub3JlIGFjdGlvbnMgdGhhdCBwZXJ0YWluIHRvIHRoZSBzYW1lIHNjcmVlbi5cbiAgICBjb25zdCBpc1NhbWVDb21wb25lbnQgPSB0aGlzLl9wcmV2Q29tcG9uZW50RXZlbnQgJiYgZXZlbnQuY29tcG9uZW50SWQgPT09IHRoaXMuX3ByZXZDb21wb25lbnRFdmVudC5jb21wb25lbnRJZDtcbiAgICBpZiAoaXNTYW1lQ29tcG9uZW50KSB7XG4gICAgICB0aGlzLl9kaXNjYXJkTGF0ZXN0VHJhbnNhY3Rpb24oKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9jbGVhclN0YXRlQ2hhbmdlVGltZW91dCgpO1xuXG4gICAgY29uc3Qgb3JpZ2luYWxDb250ZXh0ID0gdGhpcy5fbGF0ZXN0VHJhbnNhY3Rpb24udG9Db250ZXh0KCk7XG4gICAgY29uc3Qgcm91dGVIYXNCZWVuU2VlbiA9IHRoaXMuX3JlY2VudENvbXBvbmVudElkcy5pbmNsdWRlcyhldmVudC5jb21wb25lbnRJZCk7XG5cbiAgICBjb25zdCBkYXRhOiBSb3V0ZUNoYW5nZUNvbnRleHREYXRhID0ge1xuICAgICAgLi4ub3JpZ2luYWxDb250ZXh0LmRhdGEsXG4gICAgICByb3V0ZToge1xuICAgICAgICAuLi5ldmVudCxcbiAgICAgICAgbmFtZTogZXZlbnQuY29tcG9uZW50TmFtZSxcbiAgICAgICAgaGFzQmVlblNlZW46IHJvdXRlSGFzQmVlblNlZW4sXG4gICAgICB9LFxuICAgICAgcHJldmlvdXNSb3V0ZTogdGhpcy5fcHJldkNvbXBvbmVudEV2ZW50XG4gICAgICAgID8ge1xuICAgICAgICAgICAgLi4udGhpcy5fcHJldkNvbXBvbmVudEV2ZW50LFxuICAgICAgICAgICAgbmFtZTogdGhpcy5fcHJldkNvbXBvbmVudEV2ZW50Py5jb21wb25lbnROYW1lLFxuICAgICAgICAgIH1cbiAgICAgICAgOiBudWxsLFxuICAgIH07XG5cbiAgICBjb25zdCB1cGRhdGVkQ29udGV4dCA9IHtcbiAgICAgIC4uLm9yaWdpbmFsQ29udGV4dCxcbiAgICAgIG5hbWU6IGV2ZW50LmNvbXBvbmVudE5hbWUsXG4gICAgICB0YWdzOiB7XG4gICAgICAgIC4uLm9yaWdpbmFsQ29udGV4dC50YWdzLFxuICAgICAgICAncm91dGluZy5yb3V0ZS5uYW1lJzogZXZlbnQuY29tcG9uZW50TmFtZSxcbiAgICAgIH0sXG4gICAgICBkYXRhLFxuICAgIH07XG5cbiAgICBjb25zdCBmaW5hbENvbnRleHQgPSB0aGlzLl9wcmVwYXJlRmluYWxDb250ZXh0KHVwZGF0ZWRDb250ZXh0KTtcbiAgICB0aGlzLl9sYXRlc3RUcmFuc2FjdGlvbi51cGRhdGVXaXRoQ29udGV4dChmaW5hbENvbnRleHQpO1xuXG4gICAgY29uc3QgaXNDdXN0b21OYW1lID0gdXBkYXRlZENvbnRleHQubmFtZSAhPT0gZmluYWxDb250ZXh0Lm5hbWU7XG4gICAgdGhpcy5fbGF0ZXN0VHJhbnNhY3Rpb24uc2V0TmFtZShcbiAgICAgIGZpbmFsQ29udGV4dC5uYW1lLFxuICAgICAgaXNDdXN0b21OYW1lID8gY3VzdG9tVHJhbnNhY3Rpb25Tb3VyY2UgOiBkZWZhdWx0VHJhbnNhY3Rpb25Tb3VyY2UsXG4gICAgKTtcblxuICAgIHRoaXMuX29uQ29uZmlybVJvdXRlPy4oZmluYWxDb250ZXh0KTtcbiAgICB0aGlzLl9wcmV2Q29tcG9uZW50RXZlbnQgPSBldmVudDtcblxuICAgIHRoaXMuX2xhdGVzdFRyYW5zYWN0aW9uID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgLyoqIENyZWF0ZXMgZmluYWwgdHJhbnNhY3Rpb24gY29udGV4dCBiZWZvcmUgY29uZmlybWF0aW9uICovXG4gIHByaXZhdGUgX3ByZXBhcmVGaW5hbENvbnRleHQodXBkYXRlZENvbnRleHQ6IFRyYW5zYWN0aW9uQ29udGV4dCk6IFRyYW5zYWN0aW9uQ29udGV4dCB7XG4gICAgbGV0IGZpbmFsQ29udGV4dCA9IHRoaXMuX2JlZm9yZU5hdmlnYXRlPy4oeyAuLi51cGRhdGVkQ29udGV4dCB9KTtcblxuICAgIC8vIFRoaXMgYmxvY2sgaXMgdG8gY2F0Y2ggdXNlcnMgbm90IHJldHVybmluZyBhIHRyYW5zYWN0aW9uIGNvbnRleHRcbiAgICBpZiAoIWZpbmFsQ29udGV4dCkge1xuICAgICAgbG9nZ2VyLmVycm9yKFxuICAgICAgICBgWyR7UmVhY3ROYXRpdmVOYXZpZ2F0aW9uSW5zdHJ1bWVudGF0aW9uLm5hbWV9XSBiZWZvcmVOYXZpZ2F0ZSByZXR1cm5lZCAke2ZpbmFsQ29udGV4dH0sIHJldHVybiBjb250ZXh0LnNhbXBsZWQgPSBmYWxzZSB0byBub3Qgc2VuZCB0cmFuc2FjdGlvbi5gLFxuICAgICAgKTtcblxuICAgICAgZmluYWxDb250ZXh0ID0ge1xuICAgICAgICAuLi51cGRhdGVkQ29udGV4dCxcbiAgICAgICAgc2FtcGxlZDogZmFsc2UsXG4gICAgICB9O1xuICAgIH1cblxuICAgIGlmIChmaW5hbENvbnRleHQuc2FtcGxlZCA9PT0gZmFsc2UpIHtcbiAgICAgIGxvZ2dlci5sb2coXG4gICAgICAgIGBbJHtSZWFjdE5hdGl2ZU5hdmlnYXRpb25JbnN0cnVtZW50YXRpb24ubmFtZX1dIFdpbGwgbm90IHNlbmQgdHJhbnNhY3Rpb24gXCIke2ZpbmFsQ29udGV4dC5uYW1lfVwiIGR1ZSB0byBiZWZvcmVOYXZpZ2F0ZS5gLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmluYWxDb250ZXh0O1xuICB9XG5cbiAgLyoqIENhbmNlbHMgdGhlIGxhdGVzdCB0cmFuc2FjdGlvbiBzbyBpdCBkb2VzIG5vdCBnZXQgc2VudCB0byBTZW50cnkuICovXG4gIHByaXZhdGUgX2Rpc2NhcmRMYXRlc3RUcmFuc2FjdGlvbigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fbGF0ZXN0VHJhbnNhY3Rpb24pIHtcbiAgICAgIHRoaXMuX2xhdGVzdFRyYW5zYWN0aW9uLnNhbXBsZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2xhdGVzdFRyYW5zYWN0aW9uLmZpbmlzaCgpO1xuICAgICAgdGhpcy5fbGF0ZXN0VHJhbnNhY3Rpb24gPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgdGhpcy5fY2xlYXJTdGF0ZUNoYW5nZVRpbWVvdXQoKTtcbiAgfVxuXG4gIC8qKiBDYW5jZWxzIHRoZSBsYXRlc3QgdHJhbnNhY3Rpb24gc28gaXQgZG9lcyBub3QgZ2V0IHNlbnQgdG8gU2VudHJ5LiAqL1xuICBwcml2YXRlIF9jbGVhclN0YXRlQ2hhbmdlVGltZW91dCgpOiB2b2lkIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuX3N0YXRlQ2hhbmdlVGltZW91dCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9zdGF0ZUNoYW5nZVRpbWVvdXQpO1xuICAgICAgdGhpcy5fc3RhdGVDaGFuZ2VUaW1lb3V0ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUNBLElBQUFBLE1BQUEsR0FBQUMsT0FBQTtBQUlBLElBQUFD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