{"version":3,"names":["omitListItemParagraph","tokens","depth","filter","token","index","nesting","type","next"],"sources":["omitListItemParagraph.js"],"sourcesContent":["export default function omitListItemParagraph(tokens) {\n  // used to ensure that we remove the correct ending paragraph token\n  let depth = null;\n  return tokens.filter((token, index) => {\n    // update depth if we've already removed a starting paragraph token\n    if (depth !== null) {\n      depth = depth + token.nesting;\n    }\n\n    // check for a list_item token followed by paragraph token (to remove)\n    if (token.type === 'list_item' && token.nesting === 1 && depth === null) {\n      const next = index + 1 in tokens ? tokens[index + 1] : null;\n      if (next && next.type === 'paragraph' && next.nesting === 1) {\n        depth = 0;\n        return true;\n      }\n    } else if (token.type === 'paragraph') {\n      if (token.nesting === 1 && depth === 1) {\n        // remove the paragraph token immediately after the list_item token\n        return false;\n      } else if (token.nesting === -1 && depth === 0) {\n        // remove the ending paragraph token; reset depth\n        depth = null;\n        return false;\n      }\n    }\n    return true;\n  });\n}\n"],"mappings":";;;;AAAe,SAASA,qBAAqBA,CAACC,MAAM,EAAE;EAEpD,IAAIC,KAAK,GAAG,IAAI;EAChB,OAAOD,MAAM,CAACE,MAAM,CAAC,UAACC,KAAK,EAAEC,KAAK,EAAK;IAErC,IAAIH,KAAK,KAAK,IAAI,EAAE;MAClBA,KAAK,GAAGA,KAAK,GAAGE,KAAK,CAACE,OAAO;IAC/B;IAGA,IAAIF,KAAK,CAACG,IAAI,KAAK,WAAW,IAAIH,KAAK,CAACE,OAAO,KAAK,CAAC,IAAIJ,KAAK,KAAK,IAAI,EAAE;MACvE,IAAMM,IAAI,GAAGH,KAAK,GAAG,CAAC,IAAIJ,MAAM,GAAGA,MAAM,CAACI,KAAK,GAAG,CAAC,CAAC,GAAG,IAAI;MAC3D,IAAIG,IAAI,IAAIA,IAAI,CAACD,IAAI,KAAK,WAAW,IAAIC,IAAI,CAACF,OAAO,KAAK,CAAC,EAAE;QAC3DJ,KAAK,GAAG,CAAC;QACT,OAAO,IAAI;MACb;IACF,CAAC,MAAM,IAAIE,KAAK,CAACG,IAAI,KAAK,WAAW,EAAE;MACrC,IAAIH,KAAK,CAACE,OAAO,KAAK,CAAC,IAAIJ,KAAK,KAAK,CAAC,EAAE;QAEtC,OAAO,KAAK;MACd,CAAC,MAAM,IAAIE,KAAK,CAACE,OAAO,KAAK,CAAC,CAAC,IAAIJ,KAAK,KAAK,CAAC,EAAE;QAE9CA,KAAK,GAAG,IAAI;QACZ,OAAO,KAAK;MACd;IACF;IACA,OAAO,IAAI;EACb,CAAC,CAAC;AACJ"}