{"version":3,"names":["__extends","extendStatics","Object","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","exports","__esModule","PropTypes","require","React","react_1","react_native_1","propTypes","Image","indicator","bool","indicatorColor","string","indicatorSize","oneOfType","oneOf","number","originalHeight","originalWidth","styles","StyleSheet","container","alignItems","justifyContent","FitImage","_super","props","_this","ImageComponent","ImageBackground","mounted","sizeStyle","shouldDisplayIndicator","state","isLoading","onLoad","setState","onLoadStart","isFirstLoad","onError","getHeight","style","height","Number","Math","round","getOriginalHeight","getRatio","getOriginalWidth","layoutWidth","onLayout","event","nativeEvent","layout","width","fetchOriginalSizeFromRemoteImage","uri","source","getSize","setOriginalSize","renderActivityIndicator","createElement","ActivityIndicator","color","size","flatten","filter","Boolean","Error","flexGrow","originalSize","componentDidMount","componentWillUnmount","render","children","Component"],"sources":["FitImage.js"],"sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nexports.__esModule = true;\nvar PropTypes = require(\"prop-types\");\nvar React = require(\"react\");\nvar react_1 = require(\"react\");\nvar react_native_1 = require(\"react-native\");\nvar propTypes = __assign({}, react_native_1.Image.propTypes, { indicator: PropTypes.bool, indicatorColor: PropTypes.string, indicatorSize: PropTypes.oneOfType([\n        PropTypes.oneOf(['small', 'large']),\n        PropTypes.number,\n    ]), originalHeight: PropTypes.number, originalWidth: PropTypes.number });\nvar styles = react_native_1.StyleSheet.create({\n    container: {\n        alignItems: 'center',\n        justifyContent: 'center'\n    }\n});\nvar FitImage = (function (_super) {\n    __extends(FitImage, _super);\n    function FitImage(props) {\n        var _this = _super.call(this, props) || this;\n        _this.ImageComponent = react_native_1.ImageBackground || react_native_1.Image;\n        _this.mounted = false;\n        _this.sizeStyle = {};\n        _this.shouldDisplayIndicator = function () {\n            return _this.state.isLoading && _this.props.indicator !== false;\n        };\n        _this.onLoad = function () {\n            if (_this.state.isLoading) {\n                _this.setState({ isLoading: false });\n            }\n            if (typeof _this.props.onLoad === 'function') {\n                _this.props.onLoad();\n            }\n        };\n        _this.onLoadStart = function () {\n            if (_this.isFirstLoad) {\n                _this.setState({ isLoading: true });\n                _this.isFirstLoad = false;\n            }\n        };\n        _this.onError = function () {\n            if (_this.state.isLoading) {\n                _this.setState({ isLoading: false });\n            }\n        };\n        _this.getHeight = function () {\n            if (_this.style && _this.style.height) {\n                return Number(_this.style.height);\n            }\n            return Math.round(_this.getOriginalHeight() * _this.getRatio());\n        };\n        _this.getOriginalHeight = function () { return (_this.props.originalHeight || _this.state.originalHeight || 0); };\n        _this.getOriginalWidth = function () { return (_this.props.originalWidth || _this.state.originalWidth || 0); };\n        _this.getRatio = function () {\n            if (_this.getOriginalWidth() === 0) {\n                return 0;\n            }\n            return _this.state.layoutWidth / _this.getOriginalWidth();\n        };\n        _this.onLayout = function (event) {\n            var layoutWidth = event.nativeEvent.layout.width;\n            _this.setState({ layoutWidth: layoutWidth });\n        };\n        _this.fetchOriginalSizeFromRemoteImage = function () {\n            var uri;\n            if (_this.props.source instanceof Array) {\n                uri = _this.props.source[0].uri;\n            }\n            else {\n                uri = _this.props.source.uri;\n            }\n            if (!uri) {\n                return;\n            }\n            react_native_1.Image.getSize(uri, function (originalWidth, originalHeight) {\n                if (!_this.mounted) {\n                    return;\n                }\n                _this.setOriginalSize(originalWidth, originalHeight);\n            }, function () { return null; });\n        };\n        _this.setOriginalSize = function (originalWidth, originalHeight) {\n            _this.setState({\n                originalHeight: originalHeight,\n                originalWidth: originalWidth\n            });\n        };\n        _this.renderActivityIndicator = function () {\n            return (React.createElement(react_native_1.ActivityIndicator, { color: _this.props.indicatorColor, size: _this.props.indicatorSize }));\n        };\n        _this.style = react_native_1.StyleSheet.flatten(props.style);\n        if (_this.style) {\n            var size = [_this.style.width, _this.style.height];\n            if (size.filter(Boolean).length === 1) {\n                throw new Error('Props error: size props must be present ' +\n                    'none or both of width and height.');\n            }\n            if (_this.style.width) {\n                _this.sizeStyle = { width: _this.style.width };\n            }\n            else {\n                _this.sizeStyle = { flexGrow: 1 };\n            }\n        }\n        var originalSize = [props.originalWidth, props.originalHeight];\n        if (originalSize.filter(Boolean).length === 1) {\n            throw new Error('Props error: originalSize props must be present ' +\n                'none or both of originalWidth and originalHeight.');\n        }\n        _this.isFirstLoad = true;\n        _this.state = {\n            isLoading: false,\n            layoutWidth: 0,\n            originalHeight: 0,\n            originalWidth: 0\n        };\n        return _this;\n    }\n    FitImage.prototype.componentDidMount = function () {\n        this.mounted = true;\n        if (this.props.originalWidth && this.props.originalHeight) {\n            return;\n        }\n        this.fetchOriginalSizeFromRemoteImage();\n    };\n    FitImage.prototype.componentWillUnmount = function () {\n        this.mounted = false;\n    };\n    FitImage.prototype.render = function () {\n        var ImageComponent = this.ImageComponent;\n        return (React.createElement(ImageComponent, __assign({}, this.props, { onLayout: this.onLayout, onLoad: this.onLoad, onLoadStart: this.onLoadStart, onError: this.onError, source: this.props.source, style: [\n                this.style,\n                this.sizeStyle,\n                { height: this.getHeight() },\n                styles.container,\n            ] }), this.shouldDisplayIndicator() ? this.renderActivityIndicator() : this.props.children));\n    };\n    FitImage.propTypes = propTypes;\n    return FitImage;\n}(react_1.Component));\nexports[\"default\"] = FitImage;\n"],"mappings":"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"}